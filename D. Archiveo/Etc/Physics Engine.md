
# 개요

#### Constraint
물리엔진에서는 모든 걸 constraint(제약)으로 정의하고 해결한다.
제약 조건에 벗어나는 것이 있으면 제약 조건을 만족하도록 **update**하며,
그 과정에서 스텝마다 그걸 **solve**한다.

#### For Example: 원운동
어떤 물체 $p$ 가 원점으로부터 $l$ 만큼 떨어져서 원운동을 하게 하고싶다면 제약 조건은 다음과 같다. 
$$ C = ||p(x)|| - l = 0 $$
$$\text{( } ||p(x)||: \text{원점으로 부터의 물체의 위치, } l: \text{원궤도 반지름 )} $$
우리가 제약 조건을 해결하는 과정을 코드로 나타내면 다음과 같은 느낌일 것이다.
```c++
if(C != 0) {
	solve constraint
}
else {
	constraint satisfied.
}
```

그러면 어떻게 solve를 하느냐? 뉴턴 방정식을 이용한다.
1. $C = 0$을 만족하게 하는 물체의 위치 `그러나 이 방법은 물체가 텔레포트하고 노이즈 나고.. 별로 좋은 방법은 아니다.`
2. $C' = 0$을 만족하게 하는 충격량 $p$ 또는 `Impulse-based`
3. $C'' = 0$을 만족하게 하는 힘 $f$을 구하여 물체에 적용한다. `Force-based`
여기서 우리는 2번 방법을 제일 많이 쓴다. 왜냐면 3번은 정확하지만 느리고, 2번을 해도 충분히 자연스럽기 때문이다. 에린 카도는 2번을 쓰는 이유를 다음과 같이 설명한다.
- 수식이 거의 이해 가능하다.
- 직관을 가끔 적용할 수 있다.
- 충격량은 강력하다.
1번을 만족한다는 것은 2번과 3번도 만족해야 한다는 것이다.

# Ering Catto - GDC2006 Physics Tutorial

#### 운동량
운동량은 물체의 운동 효과를 나타내는 양이다. 즉, 물체의 움직임을 양으로 나타낸 값이다.
$$\vec{p} = m \vec{v} \text{ [}kg \cdot m/s\text{]}$$
#### 충격량
충격량은 충돌했을 경우에 물체가 받는 힘의 양이다.
여기서 충돌이란 운동하는 두 불체가 서로 만날 경우 작용-반작용의 법칙에 의하여 같은 시간동안 같은 크기의 힘을 주고받는 현상을 말한다.
$$\vec{I} = \vec{F}\Delta{t} \text{ [}N \cdot s\text{]}$$
운동량과 충격량의 식을 정리하면 외력이 작용하지 않는다면 다음과 같이 충돌 전과 후의 운동량이 같다는 결론이 나온다.
$$I = F\Delta{t} = ma \times \Delta{t} = m(\frac{v−v_0}{​\Delta{t}}​) \times \Delta{t}  = mv − mv_0​ = m\Delta{v} = \Delta{p}$$​