ë°ì´í„°ë² ì´ìŠ¤ì‹œìŠ¤í…œ

# 1. Introduction

[(ë°ì´í„°ë² ì´ìŠ¤ì‹œìŠ¤í…œ) Chapter 1: Introduction â€” ì¢Œì¶©ìš°ëŒ ê¸°ë¡ê¸°](https://ccho.tistory.com/6?category=1168493)

DBMS:
1. Collection of Interrelated Data
2. Set of Programs to Access the Data

íŠ¹íˆ íŠ¹ì • ì¡°ì§ê³¼ ê´€ë ¨ëœ ì •ë³´ë“¤
-> ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•˜ê³  íš¨ìœ¨ì ì¸ í™˜ê²½ ì œê³µ

**Purpose of Databas Systems**

DBMS ì´ì „: Database Applicationì´ FSì— ì§ì ‘ì ìœ¼ë¡œ ì‘ì„±
- Data Redundangy and Inconsistency(ë°ì´í„° ì¤‘ë³µê³¼ ë¹„ì¼ê´€ì„±)
- Difficalty in Accessing Data(ë°ì´í„° ì—‘ê²ŒìŠ¤ ì‹œì˜ ë‚œì )
- Data Isolation(ë°ì´í„° ê³ ë¦½)
- Integrity Problems(ë¬´ê²°ì„± ë¬¸ì œ)
- Atomicity of Updates(ì—…ë°ì´íŠ¸ì— ëŒ€í•œ ì›ìì„± ë¬¸ì œ)
- Concurrent Access by Multiple Users(ë™ì‹œ ì—‘ì„¸ìŠ¤ ë¬¸ì œ)
- Security Problems(ë³´ì•ˆ ë¬¸ì œ)

**Data Model**

ë‹¤ìŒê³¼ ê°™ì€ ê²ƒì„ ë¬˜ì‚¬í•˜ê¸° ìœ„í•œ tool
- Data: ë¬´ì—‡ì„ ì €ì¥í•  ê²ƒì¸ê°€
- Data Relationships: ë°ì´í„°ë¼ë¦¬ ì–´ë–»ê²Œ ì—°ê²°ë˜ì–´ ìˆëŠ”ê°€
- Data Semantics: ë°ì´í„°ê°€ ì–´ë–¤ ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ”ê°€
- Data Constraints: ë°ì´í„°ì— ì–´ë–¤ ê·œì¹™ì´ ì ìš©ë˜ëŠ”ê°€

ëŒ€í‘œì ì¸ ë°ì´í„° ëª¨ë¸ì˜ ì¢…ë¥˜
1. â˜† Relational Model(ê´€ê³„í˜• ëª¨ë¸) `Table(Relatinon)`
2. â˜† Entiry-Relationship(E-R) Model `Entity, Attribute, Relationship`
3. Object-based Data Models `Object-oriented, Object-relational`
4. Semi-Structured Data Model `XML`
5. Older Models (ì´ì „ ì„¸ëŒ€ ëª¨ë¸) `Network Model, Hierarchical Model`

**â˜† Relational Model**
![300](../z.%20Docs/img/Pasted%20image%2020250328155819.png)
ëª¨ë“  DataëŠ” ë‹¤ì–‘í•œ Tableì— ì €ì¥ë˜ì–´ìˆë‹¤.
- Columns(ê°€ë¡œ): Attribute
- Rows(ì„¸ë¡œ): Tuple

**View of Data(Abstraction)**
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F57nJf%2Fbtr3uD08eXY%2FaerdeHPBl010BJp8lJsUgk%2Fimg.png)
- Physical Level: ì‹¤ì œë¡œ Dataê°€ ì–´ë–»ê²Œ ì €ì¥ë˜ëŠ”ì§€
- Logical Level: ë¬´ì—‡ì´ ì €ì¥ë˜ì–´ ìˆëŠ”ì§€, ê·¸ë¦¬ê³  ì†ì„± ê°„ì˜ ê´€ê³„ ì„¤ëª… `<- Programmer!`
- View Level: ì‚¬ìš©ìë“¤ì€ Dataì˜ ì¼ë¶€ë¶„ì—ë§Œ ê´€ì‹¬ì´ ìˆìŒ

**Instances and Schemas**

PLì˜ Types and Variablesê³¼ ë¹„ìŠ·í•˜ë‹¤.
- Schema: DBì˜ ì „ì²´ì ì¸ ì„¤ê³„ `int`
	- Logical Schema: SQL ì½”ë“œë“¤
	- Physical Schema: ë””ìŠ¤í¬ì— ë¬¼ë¦¬ì ìœ¼ë¡œ ì–´ë–»ê²Œ ì €ì¥ë˜ëŠ”ê°€ì— ëŒ€í•œ ì •ë³´
- Instance: DBì— ì‹¤ì œë¡œ ì €ì¥ëœ ë°ì´í„° ê°’ `10`

Schema
```sql
CREATE TABLE Customer (
    Customer_ID CHAR(5),
    Name VARCHAR(50),
    Address VARCHAR(100)
);

CREATE TABLE Account (
    Account_ID CHAR(5),
    Balance INT
);

CREATE TABLE Deposits (
    Customer_ID CHAR(5),
    Account_ID CHAR(5),
    FOREIGN KEY (Customer_ID) REFERENCES Customer(Customer_ID),
    FOREIGN KEY (Account_ID) REFERENCES Account(Account_ID)
);
```

Instance
``` plaintext
Customer í…Œì´ë¸”
+-------------+--------+-------------------+
| Customer_ID | Name   | Address           |
+-------------+--------+-------------------+
| C001        | Alice  | Seoul             |
| C002        | Bob    | Busan             |
+-------------+--------+-------------------+
```

**Physical Data Independence**
Physical SchemaëŠ” ë°”ê¿”ë„ Logical SchemaëŠ” ë°”ê¿€ í•„ìš”ê°€ ì—†ë‹¤. ë‘˜ì´ ë…ë¦½ì ì´ë‹¤.

**Database Language(DDL)**
- Databaseì˜ Schemaë¥¼ ì •ì˜í•˜ëŠ” ì–¸ì–´
- DDLì˜ ê²°ê³¼ëŠ” `data dictionary`ì— Meta dataë¡œì¨ ì €ì¥ëœë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë“¤ì„ í¬í•¨í•œë‹¤.
	- Database Schema
	- Integrity Constraints `Primary Key, Foreign Key`
	- Authorization

**Database Manipulatoin Language (DML)**
- ì‚¬ìš©ìê°€ ì ì ˆí•œ Data Modelë¡œ êµ¬ì„±ëœ Dataë¥¼ ì ‘ê·¼/ì¡°ì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì–¸ì–´
- Query Languageë¼ê³ ë„ í•œë‹¤.
- DMLì˜ ì¢…ë¥˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‘ ê°€ì§€ ì •ë„ê°€ ìˆë‹¤.
	- Procedural DML(ì ˆì°¨ì‹ DML): Dataë¥¼ ì–´ë–»ê²Œ êµ¬í• ì§€ë„ ìš”êµ¬
	- Declarative DML(ë¹„ì ˆì°¨ì‹ DML) `ì´ê²Œ ë” ì‰¬ì›€`

**SQL Query Language**
```sql
-- Comp. Sciì— ìˆëŠ” ëª¨ë“  Instructors ì°¾ê¸°
SELECT name
FROM instructor
WHERE dept_name = 'Comp. Sci.'
```
- Declarative DML, ì¦‰ ì¡°ê±´ë§Œ ì œì‹œí•˜ê³  ì„¸ë¶€ì ì¸ ì‚¬í•­ì€ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
- í•œ ê°œ ì´ìƒì˜ Table --`SQL`-> í•œ ê°œì˜ Table
- Turing Machine equivalent Language(ë²”ìš© íŠœë§ ë¨¸ì‹ )ì´ ì•„ë‹ˆë‹¤. ì¦‰ ë²”ìš©ì„±ì´ ë–¨ì–´ì§„ë‹¤.
- ê·¸ë˜ì„œ ë³´í†µ ë³µì¡í•œ ê³„ì‚°ì„ í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ PL `c, c++, java`ì— ë‚´ì¥ëœ í˜•íƒœë¡œ ì‘ì„±ëœë‹¤.
- ë³´í†µì˜ Applicationë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ DBì— ì ‘ê·¼í•œë‹¤.
	- SQLì´ ë‚´ì¥ëœ ì–¸ì–´
	- ODBC/JDBCì™€ ê°™ì€ ì‘ìš© í”„ë¡œê·¸ë¨ Interface

**Database Design**

Logical Design: DB Schema ê²°ì •
- Business Decision: DBì— ë­˜ ì €ì¥í•´ì•¼ í•˜ëŠ”ê°€?
- CS Decision: ì„œë¡œ ì—°ê´€ëœ Attributeê°€ Tablì— ë“¤ì–´ê°€ ìˆëŠ”ê°€? ìµœëŒ€í•œ ì¤‘ë³µì´ ë°©ì§€ë˜ì–´ ìˆëŠ”ê°€?
Physical Desing: DBì˜ Physical Layout

**Database Engine**

```plaintext
Database System {
	1. Storage Magager (ì €ì¥ ì¥ì¹˜ ê´€ë¦¬ì),
	2. Query Processor (ì§ˆì˜ ì²˜ë¦¬ê¸°),
	3. Transaction Management (íŠ¸ëœì ì…˜ ê´€ë¦¬ì)
}
```

**(1) Storage Manager (ì €ì¥ ì¥ì¹˜ ê´€ë¦¬ì)**

Low-level Dataì™€ Application/Query ì‚¬ì´ì˜ Interface ì œê³µ:
- OS íŒŒì¼ ê´€ë¦¬ìì™€ ìƒí˜¸ì‘ìš©í•˜ë©° Diskì— ì›ì‹œ Data ì €ì¥
- Dataì˜ íš¨ìœ¨ì ì¸ ì €ì¥, ê²€ìƒ‰, ê°±ì‹ 

êµ¬ì„±ìš”ì†Œ:
- Authorization and integrity manager: ë¬´ê²°ì„± ì œì•½ ì¡°ê±´ ê²€ì‚¬ `ì€í–‰ ì”ê³ ëŠ” 0 ì´ìƒ`
- Transaction manager: ê³ ì¥ì‹œ ì¼ê´€ì„± ìœ ì§€ ê²€ì‚¬, ë™ì‹œì„± íŠ¸ë Œì ì…˜ ì‹œ ë¬¸ì œ ê²€ì‚¬
- File manager: ìë£Œêµ¬ì¡° ê´€ë¦¬
- Buffer manager: Disk -> Main Memory -> Cacheë¡œ ë³´ë‚¼ Data ê²°ì •

êµ¬ì¡°:
- Data Files: DB ìì²´ë¥¼ ì €ì¥
- Data Dictionary: Metadata, íŠ¹íˆ DB Schema ì €ì¥
- Indices: íŠ¹ì • ê°’ì„ ê°€ì§€ê³  ìˆëŠ” Data í•­ëª©ì— ë¹ ë¥´ê²Œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ ê²ƒ, ì£¼ë¡œ ë§ì´ ê²€ìƒ‰í•˜ëŠ” ì†ì„±ì— ëŒ€í•´ì„œ Indexingì„ í•œë‹¤.

**(2) Query Processor (ì§ˆì˜ ì²˜ë¦¬ê¸°)**

êµ¬ì„±ìš”ì†Œ:
- DDL Interpreter: DDLë¬¸ í•´ë… í›„ `data dictionary` ë‚´ì— ê¸°ë¡
- DML Compiler: DMLë¬¸ì„ Engineì´ ì´í•´í•  ìˆ˜ ìˆëŠ” Low-level ëª…ë ¹ì–´ë¡œ ë³€í™˜ `Query ìµœì í™”`
- Query Evaluation Engine: DML Compilerì— ì˜í•´ ìƒì„±ëœ Low-level ëª…ë ¹ì–´ ì‹¤í–‰

Query Processing
![400](https://blog.kakaocdn.net/dn/WG7En/btr8hy3hsHy/5f1hvviiDCgY1PTbGOUo71/img.png)

**(3) Transaction Management (íŠ¸ëœì ì…˜ ê´€ë¦¬ì)**

Transaction: DB Applicatonì—ì„œ í•˜ë‚˜ì˜ ë…¼ë¦¬ì  ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ì—°ì‚°ë“¤ì˜ ëª¨ì„
- ì›ìì„±(Atomic)
- ì¼ê´€ì„±(Consistency):
	- ë™ì‹œ ì ‘ê·¼ì‹œ ì¼ê´€ì„± ìœ ì§€ `Transaction-management Component`
	- system/transaction failì„ ì‹œí‚¤ëŠ” í•œì´ ìˆë”ë¼ë„ ì¼ê´€ì„± ìœ ì§€ `Concurrency-control Manager`

**Database Architecture**

Centralized DBs: ê³µìœ  ë©”ëª¨ë¦¬
Client-Server: Serverê°€ ì‹¤ì œ ì‘ì—…, ClientëŠ” ì›ê²©ìœ¼ë¡œ ì ‘ì†í•˜ì—¬ ì‘ì—…
Parallel DBs: ëª¨ë“  CPUê°€ ë©”ëª¨ë¦¬ ê³µìœ  / Diskë§Œ ê³µìœ  / ê³µìœ  X
Distributed DBs: Geographical distribution, Schema/data heterogeneity

![300](https://blog.kakaocdn.net/dn/1AfHa/btqIasBcpS2/VMh2kxnsvUliPsSeqHugwK/img.png)

**Database Appilcations**

DB Applicationë“¤ì€ ë³´í†µ ë‘ ë¶€ë¶„ì´ë‚˜ ì„¸ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰œë‹¤.
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FvtkSQ%2Fbtr3ftZDGDv%2FK7BgQ7uJYpLDN4qgjJNqvK%2Fimg.png)
- 2ê³„ì¸µ êµ¬ì¡°: Applicationì´ Client ìƒì— ì¡´ì¬í•˜ë©°, ê·¸ê²Œ DB Systemê³¼ í†µì‹ í•œë‹¤.
- 3ê³„ì¸µ êµ¬ì¡°: ClientëŠ” DB í˜¸ì¶œì„ ì§ì ‘ì ìœ¼ë¡œ í•˜ì§€ ì•Šê³ , Serverê°„ í†µì‹ ì€ Form Interfaceë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤. ê·¸ë¦¬ê³  Application Serverê°€ DB Systemê³¼ í†µì‹ í•œë‹¤.

ë‹¤ì–‘í•œ Userì— ë”°ë¥¸ ì „ì œ ì§€ë„ë¥¼ ë‚˜íƒ€ë‚´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.
![300](https://velog.velcdn.com/images/ashwon1218/post/dc5de678-2fec-4a1f-a05b-b3d7b55427aa/image.png)

**Database Administrator (DBA)**

Central Controlì„ í•˜ëŠ” ê´€ë¦¬ìë¥¼ ì˜ë¯¸í•œë‹¤. ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ë“¤ì„ ìˆ˜í–‰í•œë‹¤.
- Schema ì •ì˜
- ì €ì¥ êµ¬ì¡°ì™€ Access ë°©ë²• ì •ì˜
- Schea ë° Physical êµ¬ì¡° ìˆ˜ì •
- Data ì ‘ê·¼ ê¶Œí•œ ìˆ˜ë½
- ë£¨í‹´ ìœ ì§€
- DBì˜ ì£¼ê¸°ì  ë°±ì—…
- ì¶©ë¶„í•œ Disk ê³µê°„ ë³´ì¥ ë° ì—…ê·¸ë ˆì´ë“œ
- DB ì‘ì—… ëª¨ë‹ˆí„°ë§

# 2. Intro to Relational Model

[(ë°ì´í„°ë² ì´ìŠ¤ì‹œìŠ¤í…œ) Chapter 2: Introduction to Relational Model â€” ì¢Œì¶©ìš°ëŒ ê¸°ë¡ê¸°](https://ccho.tistory.com/8)

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbGkfk0%2Fbtr5N4w9kXE%2FvgijhVWmypgxI6wdJMK7g0%2Fimg.png)

**Relation Schema and Instance**

Attribute(ì†ì„±) $A_1, A_2, \cdots, A_n$

Relation Schema $R = (A_1, A_2, \cdots, A_n)$
- Table ëª¨ì–‘ ì •ì˜
- `e.g. instructor = (ID, name, dept_name, salary)`

Relation Instance $r(R)$
- Table ì•ˆì— ìˆëŠ” í–‰(Row)ë“¤

Tuple $t$
- Relation Instanceì—ì„œ ê° í–‰(Row)ë¥¼ ì˜ë¯¸í•œë‹¤. ìˆœì„œëŠ” ë¬´ì˜ë¯¸í•˜ë‹¤.
- `e.g. (ID, name, dept_name, salary) = (101, 'Alice', 'CS', 90000)`

| ê°œë…       | ë¹„ìœ            | ì˜ë¯¸                |
| -------- | ------------ | ----------------- |
| Schema   | ì‹œí—˜ì§€ ì–‘ì‹       | ì–´ë–¤ ë¬¸ì œ(ì†ì„±)ê°€ ìˆëŠ”ì§€ ì •ì˜ |
| Instance | í•™ìƒì´ í‘¼ ì‹¤ì œ ë‹µì•ˆì§€ | í˜„ë° Dataì˜ ìƒíƒœ       |
| Tuple    | ì‹œí—˜ì§€ í•œ ì¥      | í•œ ëª…ì˜ í•™ìƒ ë°ì´í„°       |

Domain
- ê° Attributeê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê°’ì˜ ì§‘í•©
- `e.g. AgeëŠ” int [0-150]`

Atomic
- í•˜ë‚˜ì˜ AttributeëŠ” í•œ ê°’ë§Œ ê°€ì ¸ì•¼ í•œë‹¤. `e.g. CS O / CS, Math X`

Null
- Unknown, ëª¨ë“  Attributeì˜ ê°’ìœ¼ë¡œ ì˜¬ ìˆ˜ ìˆìœ¼ë‚˜ ìµœëŒ€í•œ Null ê°’ì´ ì—†ë„ë¡ í•´ì•¼í•œë‹¤.

**Database Schema**

Database Schema: DBì˜ ë…¼ë¦¬ì  ì„¤ê³„ `instructor(ID, name, dept_name, salary)`
Database Instance: ì–´ë–¤ í•œ ìˆœê°„ì˜ Data ìŠ¤ëƒ…ìƒ· `ì‹¤ì œ Table Data ê°’`

*-> Instanceì˜ TupleëŠ” ì‹œê°„ì— ë”°ë¼ ë³€í•  ìˆ˜ ìˆì§€ë§Œ, SchemaëŠ” ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.*

**â˜… Keys**

$K \subseteq R$
KeyëŠ” Attributesì˜ ë¶€ë¶„ ì§‘í•©ì´ë©°, ì–´ë– í•œ ê²ƒì„ ì‹ë³„í•œë‹¤ëŠ” ì˜ë¯¸ê°€ ìˆë‹¤.
$K$, SuperkeyëŠ” Tupleì„ Uniqueí•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆëŠ” Keyë¥¼ ë§í•œë‹¤.

(1) Candidate Key (í›„ë³´ í‚¤):
Tupleì„ ìœ ì¼í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìµœì†Œí•œì˜ Attribute ì§‘í•©

(2) Primary Key (ê¸°ë³¸ í‚¤):
Candidate Key ì¤‘ ëŒ€í‘œë¡œ ì„ íƒëœ í•˜ë‚˜ì˜ Key
- ê° Tableì—ëŠ” ì˜¤ì§ í•˜ë‚˜ì˜ Primary Key ì¡´ì¬
- Primary KeyëŠ” NULLì´ ë  ìˆ˜ ì—†ê³ , ì¤‘ë³µë„ ì•ˆ ëœë‹¤.

(3) **Foreign Key (ì™¸ë˜ í‚¤)**:
ë‹¤ë¥¸ Tableì˜ Primary Keyë¥¼ ì°¸ì¡°í•˜ëŠ” ì†ì„±ìœ¼ë¡œ , ë‘ Table ì‚¬ì´ì˜ Relationshipì„ í‘œí˜„í•˜ëŠ” ë° ì‚¬ìš©ëœë‹¤.
Constraints:
- ì°¸ì¡°í•˜ëŠ” Relationê³¼ ì°¸ì¡°ë˜ëŠ” Relationì˜ Domainì´ ë™ì¼í•´ì•¼ í•˜ë©°, ë‘˜ ë‹¤ ë™ì¼í•œ ê°’ìœ¼ë¡œ ì¡´ì¬í•´ì•¼ í•œë‹¤.
- Foreign Keyì— ì €ì¥ë˜ëŠ” ê°’ì€ ë°˜ë“œì‹œ ì°¸ì¡°í•˜ëŠ” Tableì˜ Primary Key ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•œë‹¤.

*Referential Integrity Constraint(ì°¸ì¡° ë¬´ê²°ì„± ì œì•½)*
- ì°¸ì¡°í•˜ëŠ” Relationì˜ ì†ì„± ê°’ì€ ë°˜ë“œì‹œ ì°¸ì¡°ë˜ëŠ” Relationì˜ Primary Keyì— ì¡´ì¬í•´ì•¼ í•œë‹¤.
- ì¦‰, ì°¸ì¡°í•˜ëŠ” Tableì˜ íŠ¹ì • ì—´ ê°’ì´ ë°˜ë“œì‹œ ì°¸ì¡° ëŒ€ìƒ Tableì˜ Primary Key ê°’ ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•œë‹¤.

e.g.
Table1: `time_slot`
```plaintext
time_slot_id | start_time | end_time
-------------|------------|---------
TS1          | 09:00      | 10:30
TS2          | 10:45      | 12:15
```

Table2: `section`
```
course_id | sec_id | semester | year | time_slot_id (FK)
----------|--------|----------|------|------------------
CS101     | 1      | Fall     | 2024 | TS1
CS102     | 1      | Spring   | 2024 | TS3 âŒ
```

- `section.time_slot_id`ëŠ” `time_slot.time_slot_id`ë¥¼ ì°¸ì¡°í•˜ëŠ” FKì´ë‹¤.
- `section.time_slot_id` ê°’ì€ ë°˜ë“œì‹œ time_slot í…Œì´ë¸”ì— ì¡´ì¬í•´ì•¼ í•œë‹¤.
- ë”°ë¼ì„œ `TS1`ì€ OK, í•˜ì§€ë§Œ `TS3`ì€ time_slot í…Œì´ë¸”ì— ì—†ìœ¼ë¯€ë¡œ ì°¸ì¡° ë¬´ê²°ì„± ìœ„ë°˜ì´ë‹¤. âŒ

e.g.
![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcUAVRi%2Fbtr9nmmIM8M%2FE9SkFxZkUbPdlUOTcRGCkK%2Fimg.png)

- `section.time_slot_id ->> time_slot.time_slot_id`: Referential Integrity Constraintì„ ë‚˜íƒ€ë‚´ê³  ìˆë‹¤.
- Primary KeyëŠ” ë°‘ì¤„ì´ ì³ì ¸ ìˆë‹¤.
- `s_id`ëŠ” PKì´ë©´ì„œë„ FKì¸ ì˜ˆì‹œì´ë‹¤.
- `teaches` Tableì—ì„œ 4ê°œì˜ Attributeê°€ ëª¨ì˜€ì„ ë•Œë§Œ FKì˜ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.

**Relational Query Languages**

`Chapter 1.ì˜ Database Manipulatoin Language(DML) ì°¸ê³ `

3ê°œì˜ Query Languageê°€ ìˆë‹¤.
Query Languageë€ ì‚¬ìš©ìê°€ DBë¡œë¶€í„° ì •ë³´ë¥¼ ìš”ì²­í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ì´ë‹¤.
1. *Relational Algebra*: SQL ì¿¼ë¦¬ì–´ì˜ ì´ë¡ ì ì¸ ê¸°ë°˜ì„ ì œê³µí•œë‹¤.
2. Tuple Relational Calculus
3. Domain Relational Calculus

**Relational Algebra**

Procedural Languageì´ë©°, í•˜ë‚˜ í˜¹ì€ ë‘ê°œì˜ Relationì„ ì…ë ¥ ë°›ì•„ ìƒˆ Relationì„ ë°˜í™˜í•œë‹¤.
- "ë¬´ì—‡ì„ ì–»ëŠ”ê°€" ë¿ë§Œ ì•„ë‹ˆë¼ "ì–´ë–»ê²Œ ì–»ëŠ”ê°€"ê¹Œì§€ ëª…ì‹œí•œë‹¤.

| ì—°ì‚°                                | ê¸°í˜¸                  | ì„¤ëª…                                             |
| --------------------------------- | ------------------- | ---------------------------------------------- |
| **Selection (Ïƒ, ì‹œê·¸ë§ˆ)**            | `Ïƒ condition (R)`   | íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” í–‰(Tuple) ì„ íƒ                        |
| **Projection (Ï€, íŒŒì´)**            | `Ï€ column_list (R)` | íŠ¹ì • ì—´(Attribute)ë§Œ ì„ íƒ                            |
| **Union (âˆª, ìœ ë‹ˆì˜¨)**                | `R âˆª S`             | ë‘ Relationì˜ í•©ì§‘í•© (ì¤‘ë³µ ì œê±°)                        |
| **Set Difference (-, ì°¨ì§‘í•©)**       | `R - S`             | ì²« ë²ˆì§¸ RelationëŠ” ìˆì§€ë§Œ ë‘ ë²ˆì§¸ Relationì—ëŠ” ì—†ëŠ” Tuple ë°˜í™˜ |
| **Cartesian Product (Ã—, ë°ì¹´ë¥´íŠ¸ ê³±)** | `R Ã— S`             | ë‘ Relationì˜ ëª¨ë“  ì¡°í•© ë°˜í™˜                           |
| **Rename (Ï, ë¡œ)**                 | `Ï new_name (R)`    | Relation ë˜ëŠ” Attributeì˜ ì´ë¦„ ë³€ê²½                   

**Select Operation $\sigma$**

e.g. `instructor` Relationì—ì„œ "Physics" ê³¼ëª©ì— ìˆëŠ” `instructor`ë“¤ì˜ Tupleë“¤ì„ ì°¾ì•„ë¼.

![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F3fmpO%2Fbtr9nJIRoYP%2F1cSWnfcIewDqGE4c4F2jW1%2Fimg.png)
- Selection Predicate: `dept_name = "Physics"`

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fb0lA34%2Fbtr9nJ28REA%2FSKFo7n2KH3kQh9fy9wkK00%2Fimg.png)
- ì—¬ëŸ¬ ë¹„êµ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, Attributeë“¤ ë¼ë¦¬ë„ ë¹„êµí•  ìˆ˜ ìˆë‹¤. $=, \neq, >, \geq, <, \leq$
- Selection Predicateì´ ì—¬ëŸ¬ ê°œì¼ ê²½ìš° and, or, not ê¸°í˜¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. $\wedge, \vee ,\neq$

**Project Operation $\Pi$**

e.g. `intstuctor`ì†ì„±ì—ì„œ `dept_name`ì„ ì œê±°í•˜ì—¬ë¼.

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcC2m93%2Fbtr9dXBCQKK%2FIbuGqQxTxsXcaSup0vUg9K%2Fimg.png)

**Cartesian Product Operation $\bigtimes$**

e.g. `instructor` Relationê³¼ `teaches` Relationì˜ ëª¨ë“  ê°€ëŠ¥í•œ ì¡°í•©ì˜ Relationì„ ë§Œë“¤ì–´ë¼.

$\text{instructor} \times \text{teaches}$
![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FkOGuk%2Fbtr9pcSaIAp%2FyFvDkX5YLIKiYLcrLBhvJ0%2Fimg.png)
- ë‘ Relationì„ í•©í•˜ì—¬ í•˜ë‚˜ì˜ Relationì„ ë§Œë“ ë‹¤.
- ê·¸ëƒ¥ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Table í•˜ë‚˜ë¥¼ ë§Œë“œëŠ” ê±°ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.
- `instructor.ID, teaches.ID`: ê°™ì€ ì´ë¦„ì˜ Attributeê°€ ìˆëŠ” ê²½ìš° Relation ì´ë¦„ì„ ì˜†ì— ë¶™ì—¬ êµ¬ë¶„í•œë‹¤.

**Join Operation $\bowtie$**

e.g. ì–´ë– í•œ instructorì™€ ê·¸ instructorê°€ ê°€ë¥´ì¹œ courseê°€ ìˆëŠ” Tupleì„ ì¶”ì¶œí•˜ì—¬ë¼.

$\text{instructor} \bowtie_{\text{ instructor.id = teaches.id}}\text{teaches}\equiv \sigma_{\text{instructor.id = teaches.id}}(\text{instructor} \times \text{teaches})$
![450](../z.%20Docs/img/Pasted%20image%2020250330003742.png)
- $\text{instructor} \times \text{teaches}$ì—ì„œ íŠ¹ì • ê³¼ëª©ì„ ê°€ë¥´ì¹˜ì§€ ì•ŠëŠ” ê°•ì‚¬ì˜ ì •ë³´ ë˜í•œ í¬í•¨í•˜ê³  ìˆëŠ”ë°, Join Operationì„ í†µí•´ ì´ë¥¼ ì—†ì• ì¤€ë‹¤.
- ìœ„ë¥¼ í†µí•´ ì•Œ ìˆ˜ ìˆë“¯ì´, Join Operationì€ Cartesian Productì™€ Selectì˜ ì¡°í•©ì´ë‹¤. ì¦‰
$$r\bowtie_\theta s = \sigma_\theta(r\times s)$$
- Join Operationì€ ë‘ Relationì˜ Attributeê°€ ë™ì¼í•œ Domainì´ì–´ì•¼ í•œë‹¤. `Cartesian ProductëŠ” ê¼­ ë™ì¼í•  í•„ìš”ëŠ” ì—†ë‹¤.`

**Union Operation (í•©ì§‘í•©) $\cup$**

e.g. Fall 2017 ë˜ëŠ” Spring 2018ì— ê°€ë¥´ì¹œ courseë“¤ì„ ëª¨ë‘ ì°¾ì•„ë¼.

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbaN2vv%2Fbtr9pckEvhD%2FLTlOzhDis1Vr2H1RPIATY1%2Fimg.png)
- ë‘ Relationì´ ì„œë¡œ ê°™ì€ Attribute ìˆœì„œë¡œ ì´ë£¨ì–´ì ¸ ìˆì–´ì•¼ í•œë‹¤.
- í•´ë‹¹ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ë©´ ì¤‘ë³µë˜ëŠ” ê°’ì„ ì œì™¸í•˜ê³  í•©ì¹œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

**Set-Intersection Operation (êµì§‘í•©) $\cap$**

e.g. Fall 2017 ê³¼ Spring 2018ì— ê°€ë¥´ì¹œ courseë“¤ì„ ëª¨ë‘ ì°¾ì•„ë¼.

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FzaAu7%2Fbtr9nHZCGB1%2F64kmD779FuQxXnvUQCe9J1%2Fimg.png)
- Attribute ê°œìˆ˜ ë° Domainì´ ë™ì¼í•´ì•¼ í•œë‹¤.

**Set Difference Operation (ì°¨ì§‘í•©) $-$**

e.g. Fall 2017 ì—ëŠ” ê°€ë¥´ì³¤ì§€ë§Œ, Spring 2018ì—ëŠ” ê°€ë¥´ì¹˜ì§€ ì•Šì€ courseë“¤ì„ ëª¨ë‘ ì°¾ì•„ë¼.

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fdpekyj%2Fbtr9nat8WkE%2FpF5kWHi0EZ1WYt6UOXvmS0%2Fimg.png)
- ë™ì¼í•˜ê²Œ Attribute ê°œìˆ˜ ë° Domainì´ ë™ì¼í•´ì•¼ í•œë‹¤.

**Assignment Operation $\leftarrow$**

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcotT2t%2Fbtr9As7iJe9%2FLbcjk9bEkI2GQf7sW9bQp0%2Fimg.png)
- Temporary Relation ë³€ìˆ˜ë¥¼ ì„ì‹œ ë³€ìˆ˜ì— í• ë‹¹í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
- ì´ë¥¼ í†µí•´ Sequential Programì²˜ëŸ¼ ë™ì‘í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.

**Rename Operation $\rho$**

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FpghzL%2Fbtr9pcE7arf%2FKXpGlKXXh8TLZsDKBSYbnk%2Fimg.png)
- Relationì´ë‚˜ Attributeì— ìƒˆë¡œìš´ ì´ë¦„ì„ ì§€ì •í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.
- $\rho_{\text{ìƒˆë¡œìš´ ì´ë¦„}}(\text{Relation})$
- ë³µì¡í•œ ì§ˆì˜ë¥¼ ì‘ì„±í•  ë•Œ ì¤‘ê°„ ê²°ê³¼ì— ë³„ëª…ì„ ë¶™ì´ê±°ë‚˜, Attribute ì´ë¦„ì´ ê²¹ì¹˜ëŠ” ë¬¸ì œë¥¼ í”¼í•  ë•Œ ì‚¬ìš©í•œë‹¤.

**Equivalent Queries**

e.g. 90,000ë‹¬ëŸ¬ ì´ìƒì˜ ì—°ë´‰ì„ ë°›ëŠ” Physics instructorê°€ ê°€ë¥´ì¹˜ëŠ” coursesì— ëŒ€í•œ ì •ë³´ë¥¼ ì°¾ì•„ë¼.

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FGteyE%2Fbtr9m9WqyIJ%2Fj0dFp41zJA2B4XZWdckQRk%2Fimg.png)
- Queryë¥¼ ì“°ëŠ” ë°©ì‹ì€ í•˜ë‚˜ ì´ìƒì¸ ê²½ìš°ê°€ ë§ë‹¤.
- Queryê°€ ë™ì¼í•˜ì§€ ì•Šì•„ë„ ê°™ì€ ê²°ê³¼ë¥¼ ì£¼ë©´ Equivalentí•˜ë‹¤ê³  í•œë‹¤.

---

### ğŸ“˜ ê´€ê³„ ëŒ€ìˆ˜ ì—°ì‚° ìš”ì•½í‘œ

|ì—°ì‚° ê¸°í˜¸|ì—°ì‚° ì´ë¦„|ì„¤ëª…|ì˜ˆì‹œ|ì¡°ê±´|
|---|---|---|---|---|
|`Ïƒ`|**Select (ì„ íƒ)**|ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” íŠœí”Œ(í–‰)ë§Œ ì„ íƒ|`Ïƒ_{dept_name = 'Physics'}(instructor)`|ì—†ìŒ|
|`Ï€`|**Project (íˆ¬ì˜)**|íŠ¹ì • ì†ì„±(ì—´)ë§Œ ì¶”ì¶œ|`Ï€_{name, salary}(instructor)`|ì—†ìŒ (ì¤‘ë³µ ì œê±° ìë™ í¬í•¨)|
|`Ã—`|**Cartesian Product (ì¹´í‹°ì…˜ ê³±)**|ë‘ ë¦´ë ˆì´ì…˜ì˜ ëª¨ë“  ê°€ëŠ¥í•œ ì¡°í•©|`instructor Ã— teaches`|ë„ë©”ì¸ ì¼ì¹˜ í•„ìš” ì—†ìŒ|
|`â‹ˆ`|**Join (ì¡°ì¸)**|ê³µí†µ ì†ì„± ê°’ì´ ê°™ì€ íŠœí”Œë¼ë¦¬ ê²°í•©|`instructor â‹ˆ_{instructor.ID = teaches.ID} teaches`|ì¡°ì¸ ì¡°ê±´ ì†ì„±ì˜ ë„ë©”ì¸ ë™ì¼|
|`âˆª`|**Union (í•©ì§‘í•©)**|ë‘ ë¦´ë ˆì´ì…˜ì˜ ëª¨ë“  íŠœí”Œì„ ì¤‘ë³µ ì—†ì´ í•©ì¹¨|`Fall2017 âˆª Spring2018`|ì†ì„± ìˆ˜ì™€ ë„ë©”ì¸ ë™ì¼|
|`âˆ©`|**Intersection (êµì§‘í•©)**|ë‘ ë¦´ë ˆì´ì…˜ì— ëª¨ë‘ ì¡´ì¬í•˜ëŠ” íŠœí”Œë§Œ ë°˜í™˜|`Fall2017 âˆ© Spring2018`|ì†ì„± ìˆ˜ì™€ ë„ë©”ì¸ ë™ì¼|
|`âˆ’`|**Set Difference (ì°¨ì§‘í•©)**|ì²« ë¦´ë ˆì´ì…˜ì—ë§Œ ì¡´ì¬í•˜ëŠ” íŠœí”Œ ë°˜í™˜|`Fall2017 âˆ’ Spring2018`|ì†ì„± ìˆ˜ì™€ ë„ë©”ì¸ ë™ì¼|
|`â†`|**Assignment (í• ë‹¹)**|ì—°ì‚° ê²°ê³¼ë¥¼ ì„ì‹œ ë¦´ë ˆì´ì…˜ì— ì €ì¥|`temp â† Ïƒ_{...}(...)`|ì—°ì‚° ê²°ê³¼ë¥¼ ì¬ì‚¬ìš©í•  ë•Œ ì‚¬ìš©|
|`Ï`|**Rename (ì´ë¦„ ë³€ê²½)**|ë¦´ë ˆì´ì…˜/ì†ì„± ì´ë¦„ ë³€ê²½|`Ï_{prof}(instructor)``Ï_{prof(ID_num, full_name)}(instructor)`|ë³µì¡í•œ ì¿¼ë¦¬ ì •ë¦¬, ì¤‘ë³µ ì´ë¦„ íšŒí”¼ ë“±|


ğŸ’¡ ë³´ì¶© ìš”ì•½
- `Ïƒ`ì™€ `Ï€`ëŠ” **ë‹¨ì¼ ë¦´ë ˆì´ì…˜ì„ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš©**
- `Ã—`, `â‹ˆ`, `âˆª`, `âˆ©`, `âˆ’`ëŠ” **ë‘ ë¦´ë ˆì´ì…˜ì´ í•„ìš”**
- `â†`ê³¼ `Ï`ëŠ” **ì¤‘ê°„ ê²°ê³¼ë¥¼ ì¬ì‚¬ìš©í•˜ê±°ë‚˜ ê°€ë…ì„±ì„ ìœ„í•´ ì‚¬ìš©**

---

# 6. Database Design Using the E-R Model

[(ë°ì´í„°ë² ì´ìŠ¤ì‹œìŠ¤í…œ) Chapter 6: Database Design Using the E-RModel â€” ì¢Œì¶©ìš°ëŒ ê¸°ë¡ê¸°](https://ccho.tistory.com/9)

**Design Phase**
```
ìš”êµ¬ì‚¬í•­ ë¶„ì„ -> ê°œë…ì  ëª¨ë¸ë§ -> ë…¼ë¦¬/ë¬¼ë¦¬ì  ì„¤ê³„
```
1. ì‚¬ìš©ìì˜ ë°ì´í„° ìš”êµ¬ì‚¬í•­ ë¶„ì„
2. ë°ì´í„° ëª¨ë¸ ì„ íƒ `Relational Model, E-R Model`, Conceptual Schema ì„¤ê³„
3. Logical Design, Relation Schema ì¦‰ ì–´ë–¤ Tableê³¼ Attributeë¥¼ ê°€ì§ˆì§€ ì„¤ê³„ / Physical Design

**Design Alternatives**

DB Schemaë¥¼ ì„¤ê³„í•  ë•Œ, ë‹¤ìŒê³¼ ê°™ì€ ë‘ ê°€ì§€ ì˜¤ë¥˜ë¥¼ í”¼í•´ì•¼ í•œë‹¤.
1. Redundancy(ì¤‘ë³µì„±): Dataë¥¼ ì—…ë°ì´íŠ¸ í•  ë•Œ Data Inconsistencë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆë‹¤.
2. Incompleteness(ë¶ˆì™„ì „ì„±)

**Desing Approaches**

**(1) Entity-Relationship Medel(ER Model)
> ì‹¤ì„¸ê³„ì˜ ì •ë³´ë¥¼ *Entity*ì™€ *Relationship*ìœ¼ë¡œ ì¶”ìƒí™”í•˜ì—¬ ëª¨ë¸ë§
- Entity: í˜„ì‹¤ ì„¸ê³„ì—ì„œ êµ¬ë¶„ ê°€ëŠ¥í•œ ëŒ€ìƒ, Attributeë¥¼ í†µí•´ Entity ì„¤ëª…
	- e.g. í•™ìƒ, êµìˆ˜, ê³¼ëª©
- Relationship: Entity ê°„ì˜ ì—°ê´€ì„±
	- e.g. í•™ìƒì´ ìˆ˜ê°•í•œë‹¤, êµìˆ˜ê°€ ê°•ì˜í•œë‹¤.
- ER Diagramì„ í†µí•´ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„ ê°€ëŠ¥í•˜ë‹¤.

(2) Normalization Theory (ì •ê·œí™” ì´ë¡ ) `Chapter 7ì—ì„œ ë°°ìš¸ ì˜ˆì •`
> ë‚˜ìœ ì„¤ê³„ë¥¼ ê³µì‹ì ìœ¼ë¡œ íŒë³„í•˜ê³ , ì´ìƒ(Anomalies)ë¥¼ ì œê±°í•™ê¸° ìœ„í•œ í˜•ì‹ì  ì ˆì°¨

## 6-1. Outline of the ER Model

**ER model -- Database Modeling**

ER Modelì˜ DBì˜ ì „ì²´ ë…¼ë¦¬ êµ¬ì¡°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” Enterprise Schemaë¥¼ ì§€ì •í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ DB ì„¤ê³„ë¥¼ ìš©ì´í•˜ê²Œ í•˜ê¸° ìœ„í•´ ê°œë°œë˜ì—ˆë‹¤.

ER Model 3 Basic Concepts
- Entity Sets
- Relationship Sets
- Attributes
ê·¸ë¦¬ê³  ì´ ëª¨ë¸ì„ Diagramìœ¼ë¡œ í‘œí˜„í•˜ë©´ DBì˜ ì „ë°˜ì ì¸ ë…¼ë¦¬ì  êµ¬ì¡°ë¥¼ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìœ¼ë©°, ì´ë¥¼ ER Diagramì´ë¼ê³  í•œë‹¤.

**Entity Sets**

Entity
> í˜„ì‹¤ ì„¸ê³„ì—ì„œ êµ¬ë¶„ ê°€ëŠ¥í•œ ëŒ€ìƒ, Attributeë¥¼ í†µí•´ Entity ì„¤ëª…
```
instructor = (ID, name, salary)
course = (course_id, title, credits)
```

Entity Set
> ê°™ì€ ì¢…ë¥˜ì˜ Entityë“¤ë¡œ ì´ë£¨ì–´ì§„ ì§‘í•©ì´ë‹¤.
- e.g. `Students: ëª¨ë“  í•™ìƒë“¤ì˜ ì§‘í•©`

**Representing Entity Sets in ER Diagram**

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdsLK51%2Fbtsak9fyQTu%2FALpGUQzL7cg3X6PQMQXB71%2Fimg.png)
- PK: ë°‘ì¤„ ì³ì§„ Attributes

**Relationship Sets**

Relationship
> ì—¬ëŸ¬ Entity ê°„ì˜ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.
```
44553 (Peltier) -- advisor -- 22222 (Einstein)
```

Relationship Sets
> ê°™ì€ ì¢…ë¥˜ì˜ Relationshipë“¤ì„ ëª¨ì•„ë†“ì€ ì§‘í•©
> $n \ge 2$ê°œì˜ Entityë“¤ ê°„ì˜ ì¡°í•©ë“¤ë¡œ êµ¬ì„±ëœ ìˆ˜í•™ì  ì§‘í•© `ìˆ˜í•™ì  ì •ì˜`
```
(44553, 22222) âˆˆ advisor
```

**Relationship Sets with Attributes & ER Diagrams**

![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcVUkIF%2FbtsaiqiilbU%2Fb6BgRB0r9mKlryx6tDPTbK%2Fimg.png) ![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fcof9yT%2Fbtsak2VeZpp%2FLaztwRAnRkfTNhG8T4YQa1%2Fimg.png)
- Relationshipì—ë„ ê´€ë ¨ëœ Attributeê°€ ìˆì„ ìˆ˜ë„ ìˆë‹¤.
- ìœ„ ê·¸ë¦¼ì—ì„œ Advisorì˜ `data`ë¼ëŠ” Attributeë¥¼ í†µí•´ `student`ê°€ `advisor`ê³¼ ì—°ê´€ë˜ê¸° ì‹œì‘í•œ ì‹œì ì„ ì•Œ ìˆ˜ ìˆë‹¤.

**Roles**

Roles
> ë™ì¼í•œ Entity Setì´ í•œ Relationhipì— ë‘ ë²ˆ ì´ìƒ ì°¸ì—¬í•  ë•Œ,
> ê° ì°¸ì—¬ê°€ ì–´ë–¤ Roleì„ í•˜ëŠ”ì§€ë¥¼ ëª…í™•í•˜ê²Œ í•˜ê¸° ìœ„í•´ ë¶™ì´ëŠ” ì´ë¦„ì´ë‹¤.
```
[Course] â”€â”€â”€â—‡ prereq â—‡â”€â”€â”€ [Course]
    â–²                          â–²
 course_id              prereq_id -- Roles
```
- ì™œ Roleì´ í•„ìš”í• ê¹Œ? ê·¸ê²ƒì€ í•˜ë‚˜ì˜ Entity Setì´ Relationshipì— ë‘ ë²ˆ ì´ìƒ ë“±ì¥í•˜ë©´ ëˆ„ê°€ ëˆ„êµ¬ë¥¼ ì°¸ì¡°í•˜ëŠ”ì§€ ëª¨í˜¸í•´ì§€ê¸° ë•Œë¬¸ì´ë‹¤.

**Degree of a Relatioship Set**

DegreeëŠ” í•´ë‹¹ Relationship Setì— ì°¸ì—¬í•˜ëŠ” Entity Setì˜ ê°œìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤.

(1) Binary Relationship: í¬í•¨ëœ Entity setì´ ë‘ ê°œ `Degree two`
- ê±°ì˜ ëª¨ë“  Relationship Setë“¤ì€ Binaryì´ë‹¤.

(2) Non-Binary Relationship
![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fu3Qni%2FbtsaqQmq07x%2FraxMxoNOzodc0pvLC4odm1%2Fimg.png)
- ìœ„ ê·¸ë¦¼ì€ Degreeê°€ 3ì¸ Relationshipì˜ ER Diagram ì˜ˆì‹œì´ë‹¤.
- e.g. `student`ë“¤ì´ `instructor`ì˜ ì§€ë„ ì•„ë˜ `project`ì— ì°¸ì—¬í•œë‹¤.

**Complex Attributes**

Attribute Typeì—ëŠ” ë‹¤ì–‘í•œ ìœ í˜•ì´ ìˆë‹¤:
- Simple Attribute: ë” ì´í•­ ë¶„í•´ê°€ ì•ˆ ë˜ëŠ” ì†ì„± `name`
- Composite Attribute: ë˜ ë‹¤ë¥¸ Component Attributeë¡œ ë¶„í•´í•  ìˆ˜ ìˆëŠ” ì†ì„± `Address -> City, Ave, ..`

ë˜í•œ Attribute ê°’ì˜ ê°œìˆ˜ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ë‰œë‹¤:
- Single Value: í•˜ë‚˜ì˜ ê°’ë§Œ ê°€ì§„ë‹¤. `birth_date, student_id`
- Multi Value: í•˜ë‚˜ ì´ìƒì˜ ê°’ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. `phone_numbers`

ê·¸ë¦¬ê³  Derived Attributeê°€ ìˆëŠ”ë° ì´ëŠ” ë‹¤ë¥¸ ì†ì„±ìœ¼ë¡œë¶€í„° ìœ ë„ëœ ì†ì„±ì´ë‹¤.
- e.g. `age`: `date_of_birth`ê°€ ìˆë‹¤ë©´ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.

Domainì€ ê° ì†ì„±ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” í—ˆìš© ê°’ë“¤ì˜ ì§‘í•©ë‹ˆë‹¤.
- e.g. `grade`: Domain = {A, B, C, D, F}
- e.g. `salary`: Domain = ì–‘ì´ ì‹¤ìˆ˜

**Representing Complex Attributes in ER Diagram**

![150](../../z.%20Docs/img/Pasted%20image%2020250402213637.png)
- `name`: Composite Attribute
- `address`: Composite Attribute with Nested Composites
- `{phone_number}`: Multivalued Attribute
- `date_of_birth`: `age`ì˜ ê¸°ë°˜
- `age()`: Derived Attribute, `()`ëŠ” ê³„ì‚° ì‹œì ì— ìƒì„±ë˜ëŠ” ì†ì„±ì´ë¼ëŠ” ëœ»ìœ¼ë¡œ, DBì— ì‹¤ì œë¡œ ì €ì¥ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

**Mapping Cardinality Constraints**

Mapping Cardinality
- Relationship Setì„ í†µí•´ Mappingë˜ëŠ” ê°œë³„ Entityë“¤ì˜ ê°œìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤.
- Binary Relationship setì—ì„œ ê°€ì¥ ìœ ìš©í•˜ë‹¤.

Mapping CardinalityëŠ” ë‹¤ìŒ 4ê°€ì§€ì˜ ìœ í˜•ìœ¼ë¡œ ë‚˜ë‰œë‹¤.
1. One to one
2. One to many
3. Many to one
4. Many to many

Diagramìœ¼ë¡œ ë“¤ì–´ê°€ê¸° ì „, Aì™€ Bì— ëª‡ëª‡ Elementë“¤ì€ ë‹¤ë¥¸ Setì˜ Elementì™€ mappingì´ ì—†ì„ ìˆ˜ë„ ìˆë‹¤ëŠ” ê±¸ ì•Œì•„ë‘ì.

(1) One to one `Relationì´ ì—†ëŠ” ê²½ìš°ë„ One to oneì— í•´ë‹¹í•œë‹¤.`
![200](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FAvKVc%2FbtsakhEXtKq%2FRqjbfcuIheoQEKxEFqHPg0%2Fimg.png)

(2) One to many
![200](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdUv2EQ%2Fbtsai4lBHv7%2F7lslDJ5PMUb6AVPobaiAKK%2Fimg.png)

(3) Many to one
![200](../../z.%20Docs/img/Pasted%20image%2020250402214436.png)

(4) Many to many
![200](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fc7YbjR%2Fbtsak4evESb%2FFi0e6g5FGRTKg0amRxzl8K%2Fimg.png)

**Representing Candinality Construaints in ER Diagram**

$\rightarrow$: One, Relationì˜ í•œìª½ ëì´ ìµœëŒ€ 1ê°œì˜ Entityì™€ë§Œ ì—°ê²°ëœë‹¤.
$\textemdash$: Many, ê´€ê³„ì˜ í•œìª½ ëì´ ì—¬ëŸ¬ ê°œì˜ Entityë“¤ê³¼ ì—°ê²°ë  ìˆ˜ ìˆë‹¤.

(1) One to one
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FZTBAd%2Fbtsal5xtRaJ%2F2OMEG723onUcwnNHIMXS3k%2Fimg.png)
- ê° í•™ìƒì€ ìµœëŒ€ í•˜ë‚˜ì˜ êµìˆ˜ë¥¼ ì§€ë„êµìˆ˜ë¡œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

(2) One to many
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fd23kxC%2Fbtsal5xtSDU%2FzRInEuXQhpbOpMpaJJgZpk%2Fimg.png)
- ê° êµìˆ˜ëŠ” ì—¬ëŸ¬ ëª…ì˜ í•™ìƒì„ ì§€ë„í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ê·¸ëŸ¬ë‚˜ í•™ìƒì€ í•œ ëª…ì˜ êµìˆ˜ë§Œ ì§€ë„êµìˆ˜ë¡œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

(3) Many to one
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcIcIqQ%2Fbtsak4lg7Lr%2F1lRWH9QBW9pBFgb78q4mwk%2Fimg.png)
- One to manyì™€ ë°˜ëŒ€ë¼ ìƒê°í•˜ë©´ëœë‹¤.

(4) Many to many
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fdjx5Tx%2FbtsamXMJu0S%2FLTz3SyGkg45fzxR9baZG6K%2Fimg.png)
- êµìˆ˜ë‚˜ í•™ìƒì´ë‚˜ ì—¬ëŸ¬ëª…ì˜ ì§€ë„í•™ìƒ í˜¹ì€ ì§€ë„êµìˆ˜ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

**Total and Partial Participation**

![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FBDYvi%2Fbtsal5EfJoU%2FkTCmzHQUyuGqub6BLmcptK%2Fimg.png)
- Total Participation `=`: ëª¨ë“  í•™ìƒì´ ì§€ë„êµìˆ˜ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
- Partial Participation`-`: ëª¨ë“  êµìˆ˜ê°€ ì§€ë„í•  í•™ìƒì„ ê°€ì§€ê³  ìˆëŠ” ê±´ ì•„ë‹ˆë‹¤.

**Notation for Expressing More Complex Constraints**

ë” ë§ì€ ê´€ê³„ë¥¼ ë³´ì´ê³  ì‹¶ì„ ë•Œ, ë‹¤ìŒê³¼ ê°™ì´ Cardimality(ê´€ê³„ì™€ ëŒ€ì‘ë˜ëŠ” Entityì˜ ìˆ˜)ì˜ maxì™€ minì„ í‘œì‹œí•  ìˆ˜ ìˆë‹¤.
ë°‘ì˜ ê·¸ë¦¼ì€ `instructor`ëŠ” 0ë˜ëŠ” ê·¸ ì´ìƒì˜ ì§€ë„í•  í•™ìƒì„ ê°€ì§ˆ ìˆ˜ ìˆê³ , `student`ëŠ” ë°˜ë“œì‹œ í•œ ëª…ì˜ ì§€ë„êµìˆ˜ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcA4gNO%2FbtsatWGIKKA%2FlLeGQwJ8NXK6uykEoDGNeK%2Fimg.png)
- `0..*`: 0ê°œ ì´ìƒ ê´€ê³„ì— ì°¸ì—¬ (ì„ íƒì  ì°¸ì—¬ + ì—¬ëŸ¬ ë²ˆ ê°€ëŠ¥)
- `1..*`: ìµœì†Œ 1ë²ˆ ì´ìƒ ì°¸ì—¬ (ì™„ì „ ì°¸ì—¬ + ì—¬ëŸ¬ ë²ˆ ê°€ëŠ¥)
- `0..1`: ìµœëŒ€ í•œ ë²ˆë§Œ ê´€ê³„ì— ì°¸ì—¬ (ì„ íƒì  ì°¸ì—¬ + ë‹¨ì¼)
- `1..1`: ë°˜ë“œì‹œ í•˜ë‚˜ì˜ ê´€ê³„ì— ì°¸ì—¬ (ì™„ì „ ì°¸ì—¬ + ë‹¨ì¼)

**Cardinality Constraints on Ternary Relationship**

ê·¸ë ‡ë‹¤ë©´ Ternary(3) Relationshipì—ì„œì˜ CardinalityëŠ” ì–´ë–»ê²Œ í‘œí˜„í• ê¹Œ?
*ê·¸ëŸ´ ë•ŒëŠ” ìµœëŒ€ í•˜ë‚˜ì˜ í™”ì‚´í‘œë§Œ í‘œì‹œí•  ìˆ˜ ìˆë„ë¡ í•˜ê³  ìˆë‹¤.*
ê·¸ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì—¬ëŸ¬ê°€ì§€ í•´ì„ì´ ê°€ëŠ¥í•  ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FkQfIw%2FbtqQfLsTzSo%2FHHJ1cDcixTycyIeBBz5xJk%2Fimg.png)
- Aì™€ Bê°€ 1:1 Mapping ë˜ê³ , ê·¸ê²ƒê³¼ Cê°€ Manyì˜ ê´€ê³„ë¥¼ ê°€ì§€ëŠ” ê²½ìš°
- Aí˜¹ì€ Bê°€ Cì™€ 1:N ê´€ê³„ë¡œ Mapping ë˜ê³ , ë‚˜ë¨¸ì§€ í•˜ë‚˜ê°€ 1:1ë¡œ ë‹¤ì‹œ Mapping ë˜ëŠ” ê²½ìš°

**Primary Key**

PKëŠ” ì£¼ì–´ì§„ Set ë‚´ì—ì„œ íŠ¹ì • Entity/Relationshipì„ êµ¬ë¶„í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.
ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì§‘í•© ë‚´ì˜ PKì— ëŒ€í•´ ë‹¤ë£° ê²ƒì´ë‹¤:
- Entity Sets
- Relationship Sets
- Weak Entity Sets

**PK for Entity Sets**

`ch2.`ì—ì„œ ì´ë¯¸ ìì„¸íˆ ë‹¤ë¤˜ë‹¤.

**PK for Relationship Sets**

Entityë¥¼ êµ¬ë¶„ì‹œì¼œì£¼ëŠ” PKëŠ” ë°°ì› ëŠ”ë°, ê·¸ëŸ¼ Relationshipì€ ì–´ë–»ê²Œ êµ¬ë¶„í• ê¹Œ?
$E_1, \cdots E_n$ì˜ Entity Setê³¼ ê´€ê³„ë¥¼ ë§ºëŠ” Relationship Set $R$ ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ì.
-> $R$ ì„ ì‹ë³„í•˜ê¸° ìœ„í•´ì„œëŠ” *Entityì˜ PKì˜ í•©ì§‘í•©ì„* Superkeyë¡œ ê°€ì ¸ì˜¨ë‹¤.

![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FZTBAd%2Fbtsal5xtRaJ%2F2OMEG723onUcwnNHIMXS3k%2Fimg.png)
- Relationship Set `advisor`ì˜ PKëŠ” `{instructor.ID, strudent.ID}`ì´ë‹¤.

PKë¥¼ ê°€ì§€ë©´ì„œë„ ë‹¤ìŒ ê·¸ë¦¼ê³¼ ê°™ì´ `advisor`ì˜ ì¶”ê°€ ì†ì„±ì´ ìˆì„ ìˆ˜ ìˆë‹¤.
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fcof9yT%2Fbtsak2VeZpp%2FLaztwRAnRkfTNhG8T4YQa1%2Fimg.png)

**Choice of Primary Key for Binary Relationship**

Binary(2) Relationì˜ ê²½ìš° ì§‘í•©ì´ ê²°ì •ëœ ë‹¤ìŒ Relationì˜ PKë¥¼ êµ¬í•˜ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ê´€ê³„ì˜ *Cardinality*ë¥¼ ê³ ë ¤í•´ì•¼ í•œë‹¤.
í•µì‹¬ ì›ì¹™ì€ ê´€ê³„ì— ì°¸ì—¬í•˜ëŠ” *Entityë“¤ì˜ PK ì¤‘ ì–´ëŠ ìª½, ë˜ëŠ” ë‘˜ ë‹¤ë¥¼ ì¡°í•©í•´ ê´€ê³„ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆëŠëƒ*ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²°ì •í•œë‹¤.
- One to One: ë‘ ìª½ ë‹¤ ìµœëŒ€ í•œ ê°œì˜ ê´€ê³„ë§Œ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ -> *ì–‘ìª½ ì¤‘ ì•„ë¬´ ìª½ì˜ PK*
- One to Many: Many ìª½ ë§Œìœ¼ë¡œë„ ê° Relationì„ ê³ ìœ í•˜ê²Œ ì‹ë³„ ê°€ëŠ¥ -> *Many ìª½ì˜ PK*
- Many to One: One to Manyì™€ ë™ì¼í•˜ë‹¤ -> *Many ìª½ì˜ PK*
- Many to Many: ë‘ Entityì˜ PKë¥¼ ëª¨ë‘ ì¡°í•©í•œ ê²ƒì´ ìµœì†Œ Superkeyë‹¤. -> *ë‘ ìª½ PK ì¡°í•©*

**PK for Weak Entity Sets**

Weak Entity Setì´ë€ ìì²´ì ìœ¼ë¡œëŠ” PKê°€ ì—†ëŠ” Entity Setìœ¼ë¡œ, ë‹¤ë¥¸ Identifying Entityì˜ ì¡´ì¬ì— ì˜ì¡´í•´ì„œë§Œ ì‹ë³„ë  ìˆ˜ ìˆëŠ” Entityì´ë‹¤.

ê°•í•œ ì˜ˆê°€ ë°”ë¡œ ì•„ë˜ ê·¸ë¦¼ì˜ `section`ì´ë‹¤.
![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcJRNsh%2FbtsaESjqQxN%2FCMNOY54WeAnKPlqTyPYDE1%2Fimg.png)
- `section`ì€ `course_id`ê°€ ìˆì–´ì•¼ë§Œ ê³ ìœ í•˜ê²Œ ì‹ë³„ì´ ê°€ëŠ¥í•œë°, ì´ëŠ” `course` Entityì˜ ê¸°ë³¸ í‚¤ë¡œ, ì¦‰ `section`ì€ `course`ì— ì˜ì¡´ì ì´ë‹¤.
- ë”°ë¼ì„œ ë‘˜ì˜ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ Relationship Set `sec_course`ë¥¼ ë§Œë“¤ì—ˆë‹¤ê³  ì¹˜ì. í•˜ì§€ë§Œ ê·¸ ì •ë³´ëŠ” ì´ë¯¸ `section`ì˜ `course_id`ê°€ ìˆê¸° ë•Œë¬¸ì— ì¤‘ë³µì´ ëœë‹¤.
- ê·¸ë ‡ë‹¤ê³  `sec_course`ë¥¼ ì œê±°í•´ë²„ë¦¬ë©´ ë‘ ê´€ê³„ê°€ ëª…í™•íˆ í‘œí˜„ë˜ì§€ ì•ŠëŠ”ë‹¤.

ì´ë¥¼ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ í•´ê²°ì±…ì„ ì œì‹œí•œë‹¤.
![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbJXhIy%2FbtsaiqvZ1wP%2FKHVq2GVCtyvrzznDSnXqj0%2Fimg.png)
- `section`ì„ Weak Entity Setìœ¼ë¡œ ë³´ê³ ,
- `course`ë¥¼ Identifying Entity Set,
- `sec_course`ë¥¼ Identifying Relationshipìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤.
- ì ì„ ìœ¼ë¡œ í‘œì‹œí•œ `sec_id, semester, year`ëŠ” `Weak Entity` ì‹ë³„ì„ ìœ„í•´ ì¶”ê°€ë¡œ í•„ìš”í•œ ì†ì„±ë“¤ë¡œ, Discriminatorë¼ê³  í•œë‹¤.

`section`ì—ì„œ `course_id`ë¥¼ ì œê±°í•˜ëŠ” ëŒ€ì‹  `sec_course`ë¼ëŠ” ê´€ê³„ë¥¼ ë‘ì–´ `course`ì— ì˜ì¡´ì ì¸ ìƒí™©ì„ì„ ë³´ì¸ë‹¤.
- ì—¬ê¸°ì„œ Weak Entity Setì´ ì•„ë‹Œ Setì„ Strong Entity Setì´ë¼ê³  í•œë‹¤.
- Weak Entityì™€ Identifying Entityì˜ ê´€ê³„ë¥¼ Identifying Relationshipì´ë¼ê³  í•œë‹¤.
- ë‘˜ì˜ ê´€ê³„ë¥¼ ìƒê°í•´ë³´ë©´ ì™œ `=`ìœ¼ë¡œ `section`ì„ Total Participationì´ë¼ í‘œì‹œí–ˆëŠ”ì§€ ì•Œ ê²ƒì´ë‹¤.
-> ê²°ê³¼ì ìœ¼ë¡œ `section`ì˜ PKëŠ” ì—¬ì „íˆ `(course_id, sec_id, semester, year)`ì´ë‹¤.

**Redundant Attributes**

í•˜ì§€ë§Œ ì‹¤ì œë¡œ Relation Schemaë¡œ ë³€í™˜í•  ë•ŒëŠ” `course_id`ë¥¼ `section`ì— í¬í•¨ì‹œí‚¨ë‹¤.
```sql
section(
	course_id,
	sec_id,
	semester,
	year, 
	PRIMARY KEY(course_id, sec_id, semester, year),
	FOREIGN KEY(course_id)
	REFERENCES course
)
```

**E-R Diagram for a University Enterprise**

![600](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fcs0iFF%2FbtsalayT5J0%2FJdmLeACfBq9KGMcOnLksqk%2Fimg.png)
- â–¡: ë¬´ì¡°ê±´ Tableë¡œ í‘œí˜„í•´ì•¼í•œë‹¤.
- â—‡:
	- Tableë¡œ ë³€í™˜ë˜ëŠ” â—‡ê°€ ìˆê³  `Many to Many`
	- Tableë¡œ ë³€í™˜ë˜ì§€ ì•Šê³  ë¹ ì§€ëŠ” â—‡ê°€ ìˆë‹¤.

| ê¸°í˜¸  | ì˜ë¯¸           | Table ë³€í™˜ | ì¡°ê±´                            |
| --- | ------------ | -------- | ----------------------------- |
| `â–¡` | Entity       | â—‹        | í•­ìƒ                            |
| `â—‡` | Relationship | â–³        | M:Nì´ë©´ O, 1:N/1:1ì´ë©´ X (FKë¡œ ì²˜ë¦¬) |

## 6-2. Reduction to Relation Schemas

**Reduction to Relation Schemas**

```
ER Diagram -> Schemas Diagram
```

DB ì„¤ê³„ë¥¼ ì™„ë£Œí•˜ê¸° ìœ„í•´ì„œëŠ” ER Modelingì„ ê´€ê³„í˜• DBë¡œ ë³€í™˜í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
- Entityì™€ Relatioshipì€ ê°ê° í•˜ë‚˜ì˜ Tableë¡œ í‘œì‹œí•˜ê³ ,
- AttributeëŠ” Table Columnìœ¼ë¡œ í‘œí˜„ë  ìˆ˜ ì‡ë‹¤.

**Representing Entity Sets**

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbJXhIy%2FbtsaiqvZ1wP%2FKHVq2GVCtyvrzznDSnXqj0%2Fimg.png)
- Strong Entity Setì€ Table ê·¸ëŒ€ë¡œ ë§Œë“¤ë©´ ëœë‹¤.
- Weak Entity Setì€ Strong Entity Setì˜ PKë¥¼ í¬í•¨ì‹œì¼œì•¼ í•œë‹¤.
- e.g. `section (course_id, sec_id, semester, year)`

**Representation of Entity Sets with Composite Attributes**

Schemaë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì—ì„œ, `Representing Complex Attributes in ER Diagram ì°¸ê³ `
ê¸°ì¡´ Entity Attributeê°€ ë‹¤ìŒê³¼ ê°™ì€ Typeì¸ì§€ êµ¬ë¶„í•  í•„ìš”ê°€ ìˆë‹¤:
- Single/Multi
- Simple/Composite

![200](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fqdon2%2FbtsbPnjMgP4%2FVNmGTRUpKMKKuUePNF8ma0%2Fimg.png)

Schemaë¡œ ë³€í™˜ ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì ˆì°¨ë¥¼ ë”°ë¥¸ë‹¤:
1. Composite Attributeì˜ ê²½ìš°: *Flatten*ì‹œí‚¨ë‹¤.
	- e.g. `name`ì˜ ê²½ìš° `name_first_name, name_last_name`ë“±ìœ¼ë¡œ ë‹¤ ë¶„ë¦¬í•œë‹¤.
	- ì•ì— PrefixëŠ” ì˜ë¯¸ê°€ ëª…í™•í•˜ë©´ ìƒëµí•´ë„ ëœë‹¤. `first_name, last_name`
2. Multivalue/Derived Attributeì˜ ê²½ìš°: *ë°˜ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤.*

ëª¨ë‘ ë°˜ì˜í•˜ì—¬ ìœ„ Diagramì˜ Schemaë¥¼ ë§Œë“¤ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.
```plaintext
instructor(
	ID,
	first_name, middle_initial, last_name,
	street_number, street_name, apt_number,
	city, state, zip_code,
	date_of_birt
) -- Multivalue/Derivedì¸ phone_numberì™€ ageê°€ ë¹ ì¡Œë‹¤.
```

**Representation of Entity Sets with Multivalued Attributes**

ê·¸ëŸ¼ Multivalue Attributeë“¤ì€ ì–´ë–»ê²Œ í•˜ëŠëƒ?
-> Additional Tableì„ ë§Œë“ ë‹¤.

Multivalue Attributeë¥¼ `M`ì´ë¼ í•˜ê³ , í•´ë‹¹ ì†ì„±ì´ Entity `E`ì— ì†í•´ìˆëŠ” ê²½ìš°, `E_M`ì´ë¼ëŠ” ì´ë¦„ì˜ ì†ì„±ì„ ë§Œë“ ë‹¤.
```plaintext
instructor(ID, name, ...)
inst_phone = (ID, phone_number)
```
- PKëŠ” `E`ì˜ PKì¸ `ID`ë¥¼ ë”°í”ë‹¤.

```
Instructor:
  (22222, 'Einstein')

inst_phone:
  (22222, '456-7890')
  (22222, '123-4567')
```
- í•˜ë‚˜ì˜ `Instructor`ì— ì—¬ëŸ¬ê°œì˜ `phone_number`ê°€ ìˆì„ ê²½ìš° `inst_phone` Tableì— ì—¬ëŸ¬ ê°œì˜ Tupleë¡œ ë‚˜ëˆ ì„œ ì €ì¥í•œë‹¤.

ê·¸ëŸ¼ PKì´ì Multivalue Attributeì¸ `time_slot_id`ë¥¼ ê°€ì§€ê³  ìˆëŠ” `time_slot` EntityëŠ” ì–´ë–»ê²Œ í• ê¹Œ?
![100](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F3e1Kl%2FbtsbV6VbTYl%2FrGGLXGLwJcMtR4LmZX95Hk%2Fimg.png)
```plaintext
time_slot = (time_slot_id, day, start_time, end_time)
```
- ì´ ê²½ìš° Addtional Tableì„ ê·œì¹™ì— ë”°ë¼ ë§Œë“¤ì–´ë´¤ì ì¤‘ë³µì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ê·¸ëƒ¥ ë‘¬ë„ ë˜ì§€ë§Œ,
- `sec_time_slot`ì—ì„œ `time_slot_id`ë¥¼ FKë¡œ ì°¸ì¡°í•  ë•Œ ë¬¸ì œê°€ ëœë‹¤. `ê·¸ë˜ì„œ êµì¬ë¥¼ ë³´ë©´ í™”ì‚´í‘œê°€ ì—†ì–´ì ¸ ìˆë‹¤.`
- ì™œëƒí•˜ë©´ `time_slot_id`ì— í•´ë‹¹í•˜ëŠ” Tupleì´ ì—†ê±°ë‚˜ ì—¬ëŸ¬ Tupleì´ ìˆì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
	![300](../../z.%20Docs/img/Pasted%20image%2020250403174443.png)
- ë”°ë¼ì„œ FKë¡œ ì°¸ì¡°í•˜ê³  ì‹¶ë‹¤ë©´ ìµœì í™”ë¥¼ í¬ê¸°í•˜ê³  Relationì„ ë”°ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

ìì„¸í•œ ë‚´ìš©ì€ Text book `225-226p.`ë¥¼ ìì„¸íˆ ì½ì–´ë³´ë„ë¡ í•˜ì.

**Representing Relationship Sets**

ìœ„ì—ì„œ Relationì€ í¬ê²Œ Many to Many, .. One to One 4ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤ê³  í–ˆì—ˆë‹¤.
ê·¸ Relation ìœ í˜•ì— ë”°ë¼ Schemaë¡œ ë°”ê¾¸ëŠ” ë°©ì‹ì´ ë‹¤ë¥¸ë‹¤.

(1) Many to Many

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fc2dAS0%2FbtsbPI9BiyG%2FPiuuHG3Mykzsek6Cn87sh1%2Fimg.png)
- ë°˜ë“œì‹œ ë³„ë„ì˜ Tableì„ ë§Œë“¤ì–´ì•¼ í•˜ê³ ,
- ì–‘ìª½ì˜ PKë¥¼ ê°€ì ¸ì™€ì•¼í•œë‹¤.

(2) Many to One, One to Many

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fcyvrxx%2FbtsbQ1NS0zL%2Fmdl8EhM7ZqYf6W2u26Dkj0%2Fimg.png)
- ë³„ë„ì˜ Tableì„ ë§Œë“¤ í•„ìš”ê°€ ì—†ê³ ,
- Many Sideì— One Sideì— í•´ë‹¹í•˜ëŠ” PKë¥¼ FKë¡œì¨ ì¶”ê°€í•œë‹¤.

ì¦‰ `instructor-department`, `student-department` ê´€ê³„ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ëœë‹¤.
```plaintext
instructor(ID, name, salary, dept_name)
student(ID, anme, tot_cred, dept_name)
```

ê·¸ë ‡ë‹¤ë©´ `instructor-student` ê´€ê³„ì—ì„œëŠ” ì–´ë–¨ê¹Œ?
ì—¬ê¸°ëŠ” Total Participationì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” ì§€ë„êµìˆ˜ê°€ ì—†ëŠ” í•™ìƒì´ ìˆì„ ê²½ìš° `NULLê°’`ë¥¼ ìƒê°í•´ì•¼ í•œë‹¤. ì¦‰, Best Choiceë¥¼ í–‰í•´ì•¼ ëœë‹¤ëŠ” ëœ»ì´ë‹¤.
1. Relationì— ëŒ€í•œ ì¶”ê°€ì ì¸ Tableì„ ë§Œë“¤ë˜ì§€, `e.g. advisor(i_id, s_id)`
2. NULLê°’ì´ ìƒê¸°ë”ë¼ë„ ì¶”ê°€ì ì¸ Tableì„ ë§Œë“¤ì§€ ì•Šê³  Many Sideì— One Sideì— í•´ë‹¹í•˜ëŠ” PKë¥¼ FKë¡œì¨ ì¶”ê°€í• ì§€ ì„ íƒí•´ì•¼í•œë‹¤.

ì¼ë‹¨ ìˆ˜ì—…ì—ì„œëŠ” 2.ë§Œì„ í—ˆìš©í•˜ë„ë¡ í•˜ê¸°ë¡œ í•œ ê²ƒ ê°™ë‹¤.

(3) One to One

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fsh5M2%2FbtsbRAo5tdO%2Fm9TsSfrLP89BE822mC0mKk%2Fimg.png)
- ë³„ë„ì˜ Tableì„ ë§Œë“¤ í•„ìš”ê°€ ì—†ê³ ,
- ë‘ Side ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•´ì„œ ê·¸ Entityì˜ PKë¥¼ ë‹¤ë¥¸ Entityì˜ FKë¡œ ë„£ìœ¼ë©´ ëœë‹¤.

ì¦‰ ë‹¤ìŒê³¼ ê°™ì€ ë‘ ê°€ì§€ ê²½ìš°ê°€ ê°€ëŠ¥í•˜ë‹¤:
1. `instructor(instructor.ID, name, salary, student.ID)`, `student(student.ID, name, tot_cred)`
2. `instructor(instructor.ID, name, salary)`, `student(student.ID, name, tot_cred, instructor.ID)`

ê·¸ëŸ°ë° ì´ ê²½ìš°ë„ Total Participationì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— NULLê°’ì„ í—ˆìš©í•˜ì§€ ì•Šê² ë‹¤ê³  í•˜ë©´ ìœ„ì—ì„œ ì„¤ëª…í•œ ê²ƒê³¼ ë¹„ìŠ·í•˜ê²Œ `advisor`ë¼ëŠ” ì¶”ê°€ì ì¸ Tableì„ ë§Œë“¤ì–´ì•¼ í•  ê²ƒì´ë‹¤.

(+) Weak Entity

![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FclDUdt%2FbtsbToIcj1n%2FlAolH915GKLeqG4yhuHPe1%2Fimg.png)
- ë³„ë„ì˜ Tableì„ ë§Œë“¤ í•„ìš”ê°€ ì—†ê³ ,
- `section`ì— `course_id`ê°€ ì¶”ê°€ë  ê²ƒì´ë‹¤. `ìœ„ì— ì„¤ëª…í•œ ê·¸ëŒ€ë¡œë‹¤.`

## 6-3. Extended E-R Features

**Specialization**

ê°ì²´ì§€í–¥ ê°œë…ì˜ ìƒì†(Inheritance)ê³¼ ë¹„ìŠ·í•œ ìƒìœ„-í•˜ìœ„ Entity êµ¬ì¡°ë¥¼ ì„¤ê³„í•  ë•Œ ì‚¬ìš©ëœë‹¤.

Specialization:
- ìƒìœ„ Entity Setì„ íŠ¹ì„±ì— ë”°ë¼ ë” êµ¬ì²´ì ì¸ í•˜ìœ„ Entity Setìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê³¼ì •ì´ë‹¤. ì¦‰, Top-down ì„¤ê³„ ë°©ì‹ì´ë‹¤.
- `â–³ ISA`ë¡œ í‘œê¸°í•œë‹¤. e.g. instructor "is a" person.
```plaintext
         [Person]
           â–³ ISA
         /       \
  [Student]   [Instructor]
```

Attribute Inheritance:
- CPPì˜ í´ë˜ìŠ¤ ê°œë…ì„ ìƒê°í•˜ë©´ ì´í•´í•˜ê¸° í¸í•˜ë‹¤. Low-levelì˜ Entity Setì€ Higher Level Entity Setì˜ ëª¨ë“  ì†ì„±ê³¼ ê´€ê³„ë¥¼ ìƒì†ë°›ëŠ”ë‹¤.

**Specialization Example**

ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì.
ë‹¤ìŒì€ `person`ì„ ì„œë¸Œê·¸ë£¹ìœ¼ë¡œ `employee`ì™€ `student`ë¡œ ìª¼ê°  ëª¨ìŠµì´ë‹¤.
ê·¸ë¦¬ê³  ê°ê° ì¶”ê°€ ì†ì„±ìœ¼ë¡œ `salary`ì™€ `tot_credits`ë¥¼ ë„£ì—ˆë‹¤.
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbEaRgD%2FbtsbTohdVt1%2FZGSwg37gHXIm5ykbkrvo40%2Fimg.png)

ìœ„ Diagramì„ í† ëŒ€ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì„¤ê³„ë“¤ì´ ê°€ëŠ¥í•˜ë‹¤.
1. Inheritance: `instructor`ì„ ì˜ˆë¡œ ë“¤ì—ˆì„ ë•Œ, ì´ Entityì˜ ì†ì„±ì€ `(rank, salary, ID, name, street, city)`ì¼ ê²ƒì´ë‹¤.Â 
2. Overlapping : ì¤‘ë³µì´ í—ˆìš©ë˜ëŠ” ê²½ìš°, ì¦‰ `employee`ì´ë©´ì„œ `student`ì¸ ê²½ìš°ê°€ í—ˆìš©ë˜ëŠ” ì„¤ê³„ë¼ë©´, ì–‘ ìª½ ë‹¤ ê°™ì€ ì‚¬ëŒì´ ìˆì„ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.
3. Disjoint : 2.ê³¼ ë°˜ëŒ€ë¡œ ì¤‘ë³µì´ í—ˆìš©ë˜ì§€ ì•ŠëŠ” ì„¤ê³„ë„ ê°€ëŠ¥í•˜ë‹¤. `employee`ë©´ì„œ `student`ì¸ ê²½ìš°ë¥¼ ê¸ˆì§€í•˜ëŠ” ê²ƒì´ë‹¤.
4. Total and Partial:
    - Total: ì„œë¸Œê·¸ë£¹ì—ì„œ ëª¨ë“  í•™ìƒì€ í•´ë‹¹ ì„œë¸Œê·¸ë£¹ì•ˆì— ì†Œì†ë˜ëŠ” ê²ƒ. e.g. ëª¨ë“  `person`ì€ `employee` ë˜ëŠ” `student`ì´ë‹¤
    - Partial: `person`ì„ `employee`ì™€ `student`ë¡œ ë‚˜ëˆ„ì—ˆì„ ë•Œ, ë‘ ê·¸ë£¹ ì–´ë””ì—ë„ ì†í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆëŠ” ê²ƒì„ ì˜ë¯¸í•˜ë‹¤.

**Representing Specialization via Schemas**

ê·¸ë¦¬ê³  ìœ„ì˜ ì„¤ê³„ë“¤ì„ Schemaë¡œ ë³€í™˜í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ë‘ ê°€ì§€ ë°©ë²•ì´ ê°€ëŠ¥í•˜ë‹¤:
1. Method 1: `parent` Entityì˜ PKë§Œ ìƒì†ë°›ëŠ” ê²½ìš°
2. Method 2: ëª¨ë“  ì†ì„±ì„ ìƒì†ë°›ëŠ” ê²½ìš°

(1) Method 1: `parent` Entityì˜ PKë§Œ ìƒì†ë°›ëŠ” ê²½ìš°

![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcmUY7X%2FbtsbSNnZ8SY%2FMZkNA7wqVUbI0hlEPBSnck%2Fimg.png)
+) Attributeì— ëŒ€í•œ ì¤‘ë³µì€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.
-) í•˜ì§€ë§Œ ì •ë³´ë¥¼ ì–»ì„ ë•Œ í•„ìˆ˜ì ìœ¼ë¡œ Joinì„ í•´ì•¼í•˜ë¯€ë¡œ ì •ë³´ ì¡°íšŒê°€ ë²ˆê±°ë¡­ë‹¤.

(2) Method 2: ëª¨ë“  ì†ì„±ì„ ìƒì†ë°›ëŠ” ê²½ìš°

![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FCQbpc%2FbtsbRyLIklO%2Flkru0aWbo2XsSclOwvnKYk%2Fimg.png)
+) Attribute ì¤‘ë³µì´ ë¹ˆë²ˆíˆ ë°œìƒí•˜ë¯€ë¡œ ì†ì„± ë³€í™” ë°œìƒ ì‹œ ê´€ë¦¬í•´ì¤˜ì•¼ í•  Tableì´ ëŠ˜ì–´ë‚œë‹¤.
-) ì •ë³´ë¥¼ ì–»ì„ ë•Œ Joinì„ í•  í•„ìš”ê°€ ì—†ìœ¼ë¯€ë¡œ ì •ë³´ ì¡°íšŒê°€ ì‰½ë‹¤.

**Generalization**

Generalization:
- Specializationê³¼ ë°˜ëŒ€ë¡œ Bottom-up ì„¤ê³„ì— í•´ë‹¹í•œë‹¤. ì¦‰, í•˜ìœ„ Entityë¡œë¶€í„° ìƒìœ„ Entityë¥¼ ì¶”ì¶œí•˜ëŠ” ë°©ì‹ì´ë‹¤.
- í•´ì„ì´ ë‹¤ë¥¼ ë¿ ë‚˜ì˜¤ëŠ” Entity Setì˜ ê²°ê³¼ëŠ” ë™ì¼í•˜ë‹¤.

Specializationê³¼ Generalizationì˜ ì‚¬ìš©ì€ ì „í™˜ì´ ê°€ëŠ¥í•˜ë‹¤.

**Comlpeteness Constraint**



---

- total: Entityê°€ ë‚®ì€ ë ˆë²¨ Entity Setì— ì†í•´ì•¼í•œë‹¤.
- partial: Default ìƒíƒœ. Entityê°€ ë‚®ì€ ë ˆë²¨ Entity Setì— ì†í•  í•„ìš”ê°€ ì—†ë‹¤.

**Aggregation â˜†**

---

#### Designing Issues

[(ë°ì´í„°ë² ì´ìŠ¤) CH6. Database Design Using the E-R Model](https://0o0deng.tistory.com/entry/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-CH6-Database-Design-Using-the-E-R-Model)

`67p.`
(a): ë‹¨ìˆœíˆ ì†ì„±ì„ ì˜ëª» í‘œê¸°í•˜ëŠ” ê²½ìš° `dept_name`
(b): assignmentê°€ í•œ ë²ˆ, ê·¸ì— ë”°ë¥¸ mark(í‰ê°€)ê°€ í•œ ë²ˆ ë§Œ ë‚˜ê°€ëŠ”êµ¬ë‚˜ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤. ì¦‰, ê³¼ì œê°€ ì—¬ëŸ¬ ë²ˆ ë‚˜ê°ˆ ê²½ìš°ì—ëŠ” í•´ë‹¹ ëª¨ë¸ë¡œì¨ ì •ì˜ë¥¼ í•  ìˆ˜ ì—†ë‹¤. ì´ë¥¼ ìœ„í•´ì„œ ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- (c): ì´ë ‡ê²Œ í•˜ë©´ ê³¼ì¬ë¥¼ ì—¬ëŸ¬ ê°œ í• ë‹¹í•´ë„ ë¬¸ì œê°€ ì—†ë‹¤.
- (d): ê´€ê³„ ì†ì„± ìì²´ë¥¼ ê·¸ëƒ¥ ì—¬ëŸ¬ê°œì˜ setìœ¼ë¡œ í‘œê¸°

**Entities vs. Attributes**

Left
Instructorê°€ í•˜ë‚˜ì˜ phone_numberë§Œ ê°€ì§ˆ ìˆ˜ ìˆêµ¬ë‚˜

Right
inst_phone: many-to-many relationship
phone_numberë¥¼ ì—¬ëŸ¬ê°œ ê°€ì§€ê³  ìˆêµ¬ë‚˜

ì™œ ì˜¤ë¥¸ìª½ ê·¸ë¦¼ê³¼ ê°™ì´ ëª¨ë¸ë§ í•´ì•¼ë ê¹Œ?
-> Phoneì— ëŒ€í•œ ì¶”ê°€ ì •ë³´(ì†ì„±)ê°€ í•„ìš”í•  ë•Œ `location`
-> ë‹¨ìˆœíˆ `phone_number`ë¥¼ ì—¬ëŸ¬ ê°œ í‘œì‹œí•˜ê³  ì‹¶ë‹¤ë©´ Multi-Valueë¥¼ ì‚¬ìš©í•˜ë©´ëœë‹¤.

`69p.`
Relationship Setì€ Entityë“¤ ê°„ì˜ Actionì„ ë‚˜íƒ€ë‚¼ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

**Binary vs. Non-Binary Relationships**

# 3. Introduction to SQL

[(ë°ì´í„°ë² ì´ìŠ¤ì‹œìŠ¤) Chapter 3: Introduction to SQL â€” ì¢Œì¶©ìš°ëŒ ê¸°ë¡ê¸°](https://ccho.tistory.com/10)
[(ì‹¤ìŠµ) sql.js demo: Online SQL interpreter](https://db-book.com/university-lab-dir/sqljs.html)

**SQL Parts**

DML: DBì—ì„œ Tupleì„ ìˆ˜ì •/ì‚½ì…/ì œê±°, ì •ë³´ ê²€ìƒ‰
DDL: 
- Integrity`ch.2 ì°¸ê³  (PK != NULL, FK Constraints)`
- View Definition
Embedded SQL, Dynamic SQL: ì¼ë°˜ PLì— ë‚´ì¬ë  ìˆ˜ ìˆë‹¤.
DCL: Dataì˜ ì‚¬ìš©ê¶Œí•œ ê´€ë¦¬

**DDL**

SQLì˜ Data-Definition Languageì´ë‹¤.

**Domain Types in SQL**

Domain Typeì€ Attribute(column)ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê°’ì˜ ì¢…ë¥˜(Type)ì´ë‹¤.

| ë°ì´í„° íƒ€ì…                             | ì„¤ëª…                                     | ì˜ˆì‹œ                                                |
| ---------------------------------- | -------------------------------------- | ------------------------------------------------- |
| **`char(n)`**                      | ê³ ì • ê¸¸ì´ ë¬¸ìì—´ (nìë¦¬) ë¶€ì¡±í•œ ê¸¸ì´ëŠ” ê³µë°±ìœ¼ë¡œ ì±„ì›€        | `char(5)` â†’ `'A '`                                |
| **`varchar(n)`**                   | ê°€ë³€ ê¸¸ì´ ë¬¸ìì—´ ìµœëŒ€ nê¸€ìê¹Œì§€ ì €ì¥ ê°€ëŠ¥               | `varchar(5)` â†’ `'A'`, `'Abcd'`                    |
| **`int`**                          | ì •ìˆ˜í˜• (ì •ìˆ˜ ì¤‘ ì¼ë¶€, í¬ê¸°ëŠ” ì‹œìŠ¤í…œì— ë”°ë¼ ë‹¤ë¦„)          | `1`, `0`, `-100`                                  |
| **`smallint`**                     | ì‘ì€ ì •ìˆ˜í˜• intë³´ë‹¤ ì €ì¥ ê³µê°„ ì ìŒ (ë²”ìœ„ ì‘ìŒ)          | `1`, `2`, `-50`                                   |
| **`numeric(p, d)`**                | ê³ ì • ì†Œìˆ˜ì  ìˆ«ì `p`ëŠ” ì „ì²´ ìë¦¿ìˆ˜, `d`ëŠ” ì†Œìˆ˜ì  ì´í•˜ ìë¦¿ìˆ˜ | `numeric(3,1)` â†’ ê°€ëŠ¥: `44.5`, ë¶ˆê°€ëŠ¥: `444.5`, `0.32` |
| **`real`**, **`double precision`** | ë¶€ë™ ì†Œìˆ˜ì  ì‹¤ìˆ˜í˜• ì •ë°€ë„ëŠ” ì‹œìŠ¤í…œë§ˆë‹¤ ë‹¤ë¦„               | `3.14159`, `1.23e+5`                              |
| **`float(n)`**                     | ìµœì†Œ `n`ìë¦¬ ì •ë°€ë„ì˜ ì‹¤ìˆ˜í˜• (ì •í™•í•œ ì €ì¥ì€ ë³´ì¥ë˜ì§€ ì•ŠìŒ)    | `float(7)` â†’ `1.234567` ì •ë„ ì •í™•ë„                    |

**Create Table Construct**

```sql
CREATE TABLE Student (
  ID CHAR(5),              -- í•™ë²ˆ: ê³ ì • 5ê¸€ì
  Name VARCHAR(50),        -- ì´ë¦„: ìµœëŒ€ 50ì
  Age SMALLINT,            -- ë‚˜ì´: ì‘ì€ ì •ìˆ˜
  GPA NUMERIC(3,2),        -- í‰ì : ì†Œìˆ˜ì  2ìë¦¬ê¹Œì§€ ì •í™•í•˜ê²Œ ì €ì¥
  Height FLOAT(5)          -- í‚¤: ë¶€ë™ì†Œìˆ˜ì , ì •ë°€ë„ ì•½ê°„ ë–¨ì–´ì§
);
```

```sql
CREATE TABLE Instructor(
	ID char(5),
	name varchar(20),
	dept_name varchar(20),
	salary numeric(8,2)
);
```

**Integrity Constraints in Create Table**

```sql
CREATE TABLE instructor (
    ID CHAR(5),
    name VARCHAR(20) NOT NULL,
    dept_name VARCHAR(20),
    salary NUMERIC(8,2),
    PRIMARY KEY (ID),
    FOREIGN KEY (dept_name) REFERENCES department
);
```

| ì œì•½ ì¡°ê±´         | ì„¤ëª…           | íŠ¹ì§•         |
| ------------- | ------------ | ---------- |
| `PRIMARY KEY` | í–‰ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„   | NULL, ì¤‘ë³µ âŒ |
| `FOREIGN KEY` | ë‹¤ë¥¸ í…Œì´ë¸”ì˜ í‚¤ ì°¸ì¡° | ì°¸ì¡° ë¬´ê²°ì„± ìœ ì§€  |
| `NOT NULL`    | ë¹ˆ ê°’ ë¶ˆê°€       | í•„ìˆ˜ ì…ë ¥ í•„ë“œ   |

**Updates to tables**

|ëª…ë ¹ì–´|ìš©ë„|ì˜ˆì‹œ|
|---|---|---|
|`INSERT INTO ... VALUES (...)`|í–‰ ì‚½ì…|`INSERT INTO instructor VALUES (...)`|
|`DELETE FROM ...`|í–‰ ì‚­ì œ|`DELETE FROM student WHERE ...`|
|`DROP TABLE ...`|í…Œì´ë¸” ì‚­ì œ|`DROP TABLE instructor`|
|`ALTER TABLE ... ADD`|ì†ì„± ì¶”ê°€|`ALTER TABLE instructor ADD email VARCHAR(50)`|
|`ALTER TABLE ... DROP`|ì†ì„± ì œê±° (ì¼ë¶€ DBë§Œ ì§€ì›)|`ALTER TABLE instructor DROP COLUMN email`|

Note
- `DELETE`ëŠ” í–‰ë§Œ ì§€ìš°ê³  í…Œì´ë¸” êµ¬ì¡°ëŠ” ìœ ì§€
- `DROP`ì€ í…Œì´ë¸” êµ¬ì¡°ì™€ ë°ì´í„° ëª¨ë‘ ì‚­ì œ
- `ALTER`ëŠ” í…Œì´ë¸” êµ¬ì¡°ë¥¼ ìˆ˜ì • (ì—´ ì¶”ê°€/ì‚­ì œ)

**Basic Query Sturcture**

```sql
SELECT A1, A2, ..., An
FROM r1, r2, ..., rm
WHERE P;
```

|êµ¬ì„± ìš”ì†Œ|ì˜ë¯¸|
|---|---|
|`SELECT`|**ì–´ë–¤ ì†ì„±(ì»¬ëŸ¼)ì„ ì¶œë ¥í•  ê²ƒì¸ì§€** ì§€ì •|
|`FROM`|**ì–´ë–¤ í…Œì´ë¸”(ë¦´ë ˆì´ì…˜)**ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ì§€ ì§€ì •|
|`WHERE`|**ì¡°ê±´(Predicate)**: ì–´ë–¤ í–‰(Row)ì„ ì„ íƒí• ì§€ ê²°ì •|

```sql
SELECT name, salary
FROM instructor
WHERE dept_name = 'Physics';
```
-> `instructor` í…Œì´ë¸”ì—ì„œ í•™ê³¼ê°€ 'Physics'ì¸ êµìˆ˜ì˜ ì´ë¦„ê³¼ ê¸‰ì—¬ë¥¼ ì¡°íšŒ
- SQL ì¿¼ë¦¬ ê²°ê³¼ëŠ” í…Œì´ë¸” í˜•ì‹ìœ¼ë¡œ ë°˜í™˜ëœë‹¤.

| í‚¤ì›Œë“œ      | ì˜ë¯¸                     |
| -------- | ---------------------- |
| `SELECT` | ì–´ë–¤ ì—´(column)ì„ ê°€ì ¸ì˜¬ì§€ ì§€ì •  |
| `FROM`   | ì–´ë–¤ í…Œì´ë¸”ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ì§€ ì§€ì •  |
| `WHERE`  | ì–´ë–¤ ì¡°ê±´ì˜ í–‰(row)ë§Œ ê°€ì ¸ì˜¬ì§€ ì§€ì • |
| ê²°ê³¼       | í•­ìƒ "ë¦´ë ˆì´ì…˜(í…Œì´ë¸”)" í˜•ì‹ìœ¼ë¡œ ë°˜í™˜ |

**The `SELECT` Clause**

- `SELECT`ëŠ” "ë¬´ì—‡ì„ ì¶œë ¥í• ì§€" ê²°ì •í•˜ëŠ” í•µì‹¬ ì ˆì´ë‹¤.
- `DISTINCT`, `AS`, ì—°ì‚° ë“±ê³¼ í•¨ê»˜ ì“°ë©´ í›¨ì”¬ ìœ ìš©í•˜ê²Œ í™œìš© ê°€ëŠ¥í•˜ë‹¤.
- ê²°ê³¼ëŠ” í•­ìƒ Table í˜•íƒœë¡œ ë°˜í™˜ëœë‹¤.

**The `WHERE` Clause**

- `WHERE`ì€ `SELECT` ê²°ê³¼ë¥¼ í•„í„°ë§í•˜ëŠ” ì¡°ê±´ë¬¸ì´ë‹¤.
- ìˆ«ì ë¹„êµ, ë¬¸ìì—´ ë¹„êµ, NULL ê²€ì‚¬ ë“± ë‹¤ì–‘í•œ ì—°ì‚°ì„ ì§€ì›í•œë‹¤.
- ë³µí•© ì¡°ê±´ë„ ì‚¬ìš© ê°€ëŠ¥ â†’ `AND`, `OR`, `NOT`

**The `FROM` Claues**

- `FROM` ì ˆì€ ë°ì´í„°ì˜ ì¶œì²˜ë¥¼ ì§€ì •í•˜ëŠ” í•µì‹¬ ì ˆì´ë‹¤.
- ë‹¨ì¼ í…Œì´ë¸”**, ë‹¤ì¤‘ í…Œì´ë¸”, ì„œë¸Œì¿¼ë¦¬, ë³„ì¹­ ë“± ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
- ì‹¤ì œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ëŠ” í•µì‹¬ ìœ„ì¹˜ì´ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì—ë„ ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆë‹¤.

**Renaming Operation**

SQLì—ì„œ `AS`ëŠ” Attributeë‚˜ Tableì— ì„ì‹œ ì´ë¦„(ë³„ì¹­)ì„ ë¶™ì´ëŠ” ë° ì‚¬ìš©í•œë‹¤.  
ê²°ê³¼ë¥¼ ë” ì½ê¸° ì‰½ê²Œ ë§Œë“¤ê³ , ë³µì¡í•œ Queryë¥¼ ë‹¨ìˆœí•˜ê²Œ í‘œí˜„í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.
`AS`ë¥¼ ì“¸ì§€ë§ì§€ëŠ” ë¬¼ë¡  ì„ íƒì‚¬í•­ì´ë‹¤.

**Self Join Example**

Q) Find the supervisor of the supervisor of "Bob"
```sql
SELECT ES2.supervisor
FROM emp_super AS ES1 emp_super AS ES2
WHERE ES1.person='Bob' AND ES1.supervisor=ES2.person
```
-> ê²°ê³¼ë¡œ Davidê°€ ì¶œë ¥ëœë‹¤.

Q) Can you find ALL the supervisors (direct and indirect) of "Bob"
-> ì´ëŠ” Transitive Relationship(ì „ì´ì„± ê´€ê³„, Recursive)ìœ¼ë¡œ, SQLì´ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.

**String Operations**

| í•¨ìˆ˜                  | ê¸°ëŠ¥           | ê²°ê³¼ ì˜ˆì‹œ                   |
| ------------------- | ------------ | ----------------------- |
| \|\|                | ë¬¸ìì—´ ì—°ê²°       | `ë˜ëŠ”`CONCAT()`           |
| `SUBSTRING()`       | ë¶€ë¶„ ë¬¸ìì—´ ì¶”ì¶œ    | `'Database'` â†’ `'base'` |
| `LENGTH()`          | ê¸¸ì´ ë°˜í™˜        | `'Hello'` â†’ `5`         |
| `UPPER() / LOWER()` | ëŒ€ë¬¸ì/ì†Œë¬¸ì ë³€í™˜   | `'sql'` â†’ `'SQL'`       |
| `TRIM()`            | ì–‘ìª½ ê³µë°± ì œê±°     | `' Hello '` â†’ `'Hello'` |
| `REPLACE()`         | ë¬¸ì ëŒ€ì²´        | `'abc' â†’ 'xbc'`         |
| `POSITION()`        | íŠ¹ì • ë¬¸ìì—´ ìœ„ì¹˜ ì°¾ê¸° | `'a' in 'data'` â†’ `2`   |

- ë¬¸ìì—´ í•¨ìˆ˜ëŠ” ë°ì´í„°ë¥¼ ì¶œë ¥ ì˜ˆì˜ê²Œ, ì¡°ê±´ ê±¸ê¸° ì‰½ê²Œ, ë°ì´í„° ì •ë¦¬ì— ìœ ìš©í•˜ë‹¤.
- DBMSë§ˆë‹¤ ì§€ì›ë˜ëŠ” í•¨ìˆ˜ ì´ë¦„ì´ë‚˜ ë¬¸ë²•ì— ì•½ê°„ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆë‹¤. (MySQL, PostgreSQL ë“±)

**Ordering the Display of Tuples**

**Where Clause Predicates**

**Set Operations**

| Operation       | ì˜ë¯¸                   |
| --------------- | -------------------- |
| `A UNION B`     | A ë˜ëŠ” Bì— í¬í•¨ëœ ëª¨ë“  Tuple |
| `A INTERSECT B` | Aì™€ Bì— ëª¨ë‘ í¬í•¨ëœ Tuple   |
| `A EXCEPT B`    | Aì—ëŠ” ìˆì§€ë§Œ Bì—ëŠ” ì—†ëŠ” Tuple |

ë³´í†µ ìë™ìœ¼ë¡œ ì¤‘ë³µì„ ì œì™¸í•´ì£¼ëŠ”ë° `all`ì„ ë¶™ì´ë©´ ì¤‘ë³µì„ í—ˆìš©í•œë‹¤.

**NULL Values**

ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ Unkownê°’ì¼ ë•Œ ì‚¬ìš©í•œë‹¤.
Atirhmetic ê³„ì‚°ì„ í•  ë•Œ Nullê°‘ì´ í¬í•¨ë˜ì–´ìˆìœ¼ë©´ ë¬´ì¡°ê±´ `NULL`ê°’ì„ ë°˜í™˜í•œë‹¤.
`WHERE` ì¡°ê±´ë¬¸ì—ì„œ `IS NULL`, `IS NOT NULL`ì„ í†µí•´ `NULLê°’ì„ í™•ì¸í•  ìˆ˜ìˆë‹¤.
`AND`ì™€ `OR` ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ê²½ìš° `TRUE/FALSE`ê°’ì´ ê²°ì •ë  ìˆ˜ë„ ìˆë‹¤.
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FmHDOq%2FbtsbQ19cEgH%2FoqHBsSlAVtWLsK6U1zPxKK%2Fimg.png)

**Aggregate Functions**

ì—‘ì…€ ìƒê°í•˜ë©´ëœë‹¤.
ì…ë ¥ìœ¼ë¡œ Setì„ ê°€ì§€ë©° ì¶œë ¥ìœ¼ë¡œëŠ” ë‹¨ì¼ê°’ì„ ê°–ëŠ”ë‹¤. ë³´í†µ ë‹¤ìŒê³¼ ê°™ì€ ë‚´ì¥ í•¨ìˆ˜ê°€ ìˆë‹¤.

|í•¨ìˆ˜|ì„¤ëª…|ì˜ˆì‹œ|
|---|---|---|
|`AVG(col)`|í‰ê· ê°’|`AVG(salary)`|
|`MIN(col)`|ìµœì†Œê°’|`MIN(score)`|
|`MAX(col)`|ìµœëŒ€ê°’|`MAX(salary)`|
|`SUM(col)`|ì´í•©|`SUM(credits)`|
|`COUNT(*)`|ëª¨ë“  í–‰ ê°œìˆ˜|`COUNT(*)`|
|`COUNT(col)`|NULL ì œì™¸ ê°’ ê°œìˆ˜|`COUNT(name)`|

**Aggregate Functions - Group By â˜†**

`GROUP BY`ëŠ” í–‰ë™ì„ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ê³  ê° ê·¸ë£¹ì— ëŒ€í•´ Aggregate Functionsì„ ì ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.
e.g. ë¶€ì„œë³„ í‰ê· , í•™ë…„ë³„ í•™ìƒ ìˆ˜, ì¹´í…Œê³ ë¦¬ë³„ í•©ê³„
![450](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbP9DKQ%2FbtsbSLqLnXi%2FhzfCFiHCT2sJyK9uLsZVg1%2Fimg.png)

ê¸°ë³¸ êµ¬ì¡°
```sql
SELECT ê·¸ë£¹ì†ì„±, ì§‘ê³„í•¨ìˆ˜
FROM í…Œì´ë¸”
GROUP BY ê·¸ë£¹ì†ì„±;
```

ì£¼ì˜í•  ì ì€ `SELECT` ì ˆì— ì¼ë°˜ ì†ì„±ì„ ì“¸ ë• ë°˜ë“œì‹œ `GROUP BY`ì— í¬í•¨ë˜ì–´ì•¼ í•œë‹¤.
ë‹¤ìŒì€ ì˜ëª»ëœ ì˜ˆì‹œì´ë‹¤.
```sql
SELECT dept_name, ID, AVG(salary)
FROM instructor
GROUP BY dept_name;
```
- `ID`ëŠ” ì§‘ê³„ í•¨ìˆ˜ë¡œ ë¬¶ì´ì§€ë„ ì•Šì•˜ê³ , `GROUP BY`ì—ë„ í¬í•¨ë˜ì§€ ì•Šì•˜ë‹¤.
- SQLì€ ê·¸ë£¹ë§ˆë‹¤ IDê°€ í•˜ë‚˜ì¸ì§€, ì—¬ëŸ¬ ê°œì¸ì§€ ì•Œ ìˆ˜ ì—†ì–´ì„œ ëª¨í˜¸í•˜ë‹¤.

**Aggreate Functions - Having Clause**

`HAVING`ìœ¼ë¡œ ê·¸ë£¹ ì¡°ê±´ ê±¸ê¸°
```sql
SELECT dept_name, AVG(salary) AS avg_salary
FROM instructor
GROUP BY dept_name
HAVING AVG(salary) > 70000;
```

**Nested Subqueries**

ì¤‘ì²© ì§ˆì˜ ì²˜ë¦¬(Nested Subqueries)ë€, í•˜ë‚˜ì˜ Query í•œì— ë˜ ë‹¤ë¥¸ Query `SELECT-FROM-WHERE`ì´ ìˆëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ë³´í†µ ê´„í˜¸ `()` ì•ˆì— ì‘ì„±ë˜ë©°, ì£¼ ì¿¼ë¦¬(main query)ì™€ í•¨ê»˜ ì‹¤í–‰ëœë‹¤.

Subquery ê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

| ìœ„ì¹˜         | ì˜ˆì‹œ ì„¤ëª…                       |
| ---------- | --------------------------- |
| `FROM` ì ˆ   | **ì„œë¸Œì¿¼ë¦¬ë¥¼ í…Œì´ë¸”ì²˜ëŸ¼** ì‚¬ìš© (ê°€ìƒ í…Œì´ë¸”) |
| `WHERE` ì ˆ  | **ë¹„êµ ì¡°ê±´ì´ë‚˜ ì¡´ì¬ ì—¬ë¶€ ê²€ì‚¬**        |
| `SELECT` ì ˆ | **ë‹¨ì¼ ê°’ì„ ê³„ì‚°í•´ì„œ ì¶œë ¥**           |

(1) WHERE ì ˆì— ì“°ëŠ” ì„œë¸Œì¿¼ë¦¬ (ê°€ì¥ í”í•œ í˜•íƒœ)

e.g. ê¸‰ì—¬ê°€ ì „ì²´ í‰ê· ë³´ë‹¤ ë†’ì€ êµìˆ˜ë¥¼ ì°¾ê¸°
```sql
SELECT name, salary
FROM instructor
WHERE salary > (
  SELECT AVG(salary)
  FROM instructor
);
```
- `SELECT AVG(salary)` â†’ ì„œë¸Œì¿¼ë¦¬: ì „ì²´ í‰ê·  ê¸‰ì—¬ ê³„ì‚° 
- ë°”ê¹¥ ì¿¼ë¦¬ì—ì„œ ê·¸ë³´ë‹¤ ê¸‰ì—¬ê°€ ë†’ì€ ì‚¬ëŒì„ ì°¾ìŒ

(2) FROM ì ˆì— ì“°ëŠ” ì„œë¸Œì¿¼ë¦¬
- ì„œë¸Œì¿¼ë¦¬ë¥¼ ì„ì‹œ í…Œì´ë¸”ì²˜ëŸ¼ ì‚¬ìš©í•´ì„œ JOINì´ë‚˜ GROUP BYì™€ í•¨ê»˜ ì“´ë‹¤.

e.g. í•™ê³¼ë³„ í‰ê·  ê¸‰ì—¬ë¥¼ êµ¬í•˜ê³  ê·¸ê²ƒë§Œ ë”°ë¡œ ì¶œë ¥
```sql
SELECT dept_name, avg_salary
FROM (
  SELECT dept_name, AVG(salary) AS avg_salary
  FROM instructor
  GROUP BY dept_name
) AS dept_avg
WHERE avg_salary > 70000;
```
-> ë‚´ë¶€ ì„œë¸Œì¿¼ë¦¬ê°€ ë¶€ì„œë³„ í‰ê·  ê¸‰ì—¬ë¥¼ ë§Œë“  í…Œì´ë¸”ì´ ë˜ê³ ,  
ê·¸ê±¸ ë°”ê¹¥ ì¿¼ë¦¬ì—ì„œ í•„í„°ë§

(3) SELECT ì ˆì—ì„œ ì“°ëŠ” ì„œë¸Œì¿¼ë¦¬
- ì»¬ëŸ¼ í•˜ë‚˜ì˜ ê°’ì„ ì„œë¸Œì¿¼ë¦¬ ê²°ê³¼ë¡œ ì±„ìš°ê¸° (ë‹¨ì¼ ê°’ì´ì–´ì•¼ í•¨)

e.g. ê° êµìˆ˜ ì´ë¦„ê³¼ ì „ì²´ êµìˆ˜ì˜ í‰ê·  ê¸‰ì—¬ í•¨ê»˜ ì¶œë ¥
```sql
SELECT name,
       salary,
       (SELECT AVG(salary) FROM instructor) AS avg_salary
FROM instructor;
```
-> ê° í–‰ë§ˆë‹¤ `avg_salary` ì»¬ëŸ¼ì—ëŠ” ë™ì¼í•œ í‰ê· ê°’ì´ í‘œì‹œëœë‹¤.

ìš”ì•½í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

| ìœ„ì¹˜       | ì˜ˆì‹œ                                  | ìš©ë„             |
| -------- | ----------------------------------- | -------------- |
| `WHERE`  | `salary > (SELECT AVG(salary) ...)` | ì¡°ê±´ ë¹„êµ          |
| `FROM`   | `FROM (SELECT ...) AS temp`         | ì„œë¸Œì¿¼ë¦¬ë¥¼ í…Œì´ë¸”ì²˜ëŸ¼ ì‚¬ìš© |
| `SELECT` | `SELECT name, (SELECT ...)`         | ê²°ê³¼ì— ë‹¨ì¼ ê°’ í¬í•¨    |

ì£¼ì˜ì‚¬í•­
- ì„œë¸Œì¿¼ë¦¬ì˜ ê²°ê³¼ê°€ ì—¬ëŸ¬ í–‰ì´ë©´ ì˜¤ë¥˜ ë°œìƒ (ë‹¨ì¼ ê°’ë§Œ ê¸°ëŒ€í•˜ëŠ” ê³³ì—ì„ )
- `IN`, `EXISTS`, `ANY`, `ALL` ë“±ì˜ ì—°ì‚°ìì™€ í•¨ê»˜ ì“°ë©´ ë‹¤ì¤‘ í–‰ ë¹„êµë„ ê°€ëŠ¥í•´ìš” (ë‹¤ìŒì— ì„¤ëª… ê°€ëŠ¥!)


**Set Membership**

â˜… ê¼­ ì´í•´í•´ë³´ì.
```sql
SELECT COUNT(DISTINCT ID)
FROM takes
WHERE (course_id, sec_id, semester, year) IN (
  SELECT course_id, sec_id, semester, year
  FROM teaches
  WHERE teaches.ID = 10101
);
```
->
```sql
SELECT COUNT(DISTINCT takes.ID)
FROM takes ta, teaches te
WHERE te.ID = '10101' AND (
	te.course_id,
	te.sec_id, 
	te.semester,
	te.year
)
```

**Set Comparison**

`SOME`, `ALL` ì—°ì‚°ìë¥¼ í†µí•´ Subquery ê²°ê³¼ì˜ Relationê³¼ ë°”ê¹¥ Queryë¥¼ ë¹„êµí•˜ëŠ” ê²ƒì´ë‹¤.
ë‹¤ìŒ ë‘ QueryëŠ” ê°™ì€ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.

`SOME`ì ˆ
```sql
SELECT DISTINCT T.name
FROM instructor AS T, instructor AS S
WHERE T.salary > S.salary
  AND S.dept_name = 'Biology';
```
->
```sql
SELECT name
FROM instructor
WHERE salary > SOME (
  SELECT salary
  FROM instructor
  WHERE dept_name = 'Biology'
);
```
- Subqueryì˜ ê²°ê³¼ ì¤‘ í•˜ë‚˜ë¼ë„ ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ëŠ”ê²Œ ìˆë‹¤ë©´ í•´ë‹¹ Tupleì„ ì°¸ìœ¼ë¡œ íŒë‹¨í•œë‹¤.
- `SOME`ì€ `IN` ì—°ì‚°ê³¼ ë™ì¼í•˜ì§€ë§Œ `SOME` ë¶€ì •ì´ `NOT IN`ê³¼ ë™ì¼í•œ ê²ƒì€ ì•„ë‹ˆë‹¤.

`ALL` ì ˆ
`SOME`ê³¼ `ALL`ì˜ ìƒì‹ì ì¸ ì°¨ì´ë¥¼ ìƒê°í•˜ë©´ëœë‹¤. ë‘ ê°œì˜ ì ˆì„ ê·¸ë¦¼ìœ¼ë¡œ ë¹„êµí•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.
![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FxGY6y%2FbtsbRJN0mVM%2FEoCMANyK2ADVgtN66hkuLk%2Fimg.png) ![300](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FxTa1G%2FbtsbRKszQxF%2FQstFtyUQ6DSUv1Padn8wK0%2Fimg.png)

**Test for Empty Relations**

... `ì •ë¦¬ í•„ìš”`

**With Clause**